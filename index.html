<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Curtain Sales Academy</title>
</head>
<body>
<div id="root"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">
const { useState, useEffect, useCallback, useMemo } = React;

let USERS_DATA = [
  { id:1, name:"‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ", email:"trainee@demo.com", pass:"1234", role:"trainee", team:"‡∏ó‡∏µ‡∏° A", avatar:"üßë‚Äçüíº" },
  { id:2, name:"‡∏ß‡∏¥‡∏†‡∏≤ ‡πÅ‡∏™‡∏á‡∏ó‡∏≠‡∏á", email:"sales@demo.com", pass:"1234", role:"sales", team:"‡∏ó‡∏µ‡∏° A", avatar:"üë©‚Äçüíº" },
  { id:3, name:"‡∏ò‡∏ô‡∏≤ ‡∏ö‡∏∏‡∏ç‡∏°‡∏µ", email:"manager@demo.com", pass:"1234", role:"manager", team:"‡∏ó‡∏µ‡∏° A", avatar:"üë®‚Äçüíª" },
  { id:4, name:"Admin", email:"admin@demo.com", pass:"1234", role:"admin", team:"-", avatar:"‚öôÔ∏è" },
];


let RES_DEFAULT = [
  {id:1, icon:"üìÇ", name:"‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô 2026", type:"PDF", url:"", desc:"‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏£‡∏ß‡∏°‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏£‡∏∏‡πà‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤"},
  {id:2, icon:"üì∏", name:"‡∏£‡∏π‡∏õ Before-After ‡∏ú‡∏•‡∏á‡∏≤‡∏ô", type:"ZIP", url:"", desc:"‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô-‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏ä‡∏ß‡πå‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"},
  {id:3, icon:"üìã", name:"Template ‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤", type:"XLSX", url:"", desc:"‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô"},
  {id:4, icon:"üìê", name:"‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ß‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô", type:"PDF", url:"", desc:"‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏à‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô"},
  {id:5, icon:"üé®", name:"Swatch Book Digital", type:"PDF", url:"", desc:"‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•"},
  {id:6, icon:"üìä", name:"‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ú‡πâ‡∏≤", type:"PDF", url:"", desc:"‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏ú‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"},
  {id:7, icon:"üè∑Ô∏è", name:"Price List Q1/2026", type:"XLSX", url:"", desc:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î"},
  {id:8, icon:"üìù", name:"‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", type:"DOCX", url:"", desc:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"},
];

let LEVELS_DATA = [
  {
    id:1, title:"‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô", subtitle:"Foundation", icon:"üå±", color:"#4CAF50", required:true,
    lessons:[
      { id:"1-1", title:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô", content:"‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡∏•‡∏±‡∏Å:\n\n‚Ä¢ Sheer / Voile ‚Äî ‡∏ú‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πà‡∏á ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏™‡∏á 10-20% ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô\n‚Ä¢ Dimout ‚Äî ‡∏•‡∏î‡πÅ‡∏™‡∏á 70-90% ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á\n‚Ä¢ Blackout ‚Äî ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á 95-100% ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô\n‚Ä¢ Sunscreen ‚Äî ‡∏Å‡∏£‡∏≠‡∏á UV ‡∏¢‡∏±‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏ß‡∏¥‡∏ß ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á\n‚Ä¢ ‡∏ú‡πâ‡∏≤‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ ‚Äî ‡∏•‡∏¥‡∏ô‡∏¥‡∏ô ‡∏ù‡πâ‡∏≤‡∏¢ ‡πÑ‡∏´‡∏° organic\n‚Ä¢ ‡∏Å‡∏≥‡∏°‡∏∞‡∏´‡∏¢‡∏µ‡πà ‚Äî ‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤ ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á‡∏î‡∏µ ‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°" },
      { id:"1-2", title:"‡∏Ñ‡πà‡∏≤ % ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£", content:"‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á:\n\n‚Ä¢ 10-20% = ‡πÇ‡∏õ‡∏£‡πà‡∏á (Sheer)\n‚Ä¢ 40-60% = ‡∏Å‡∏∂‡πà‡∏á‡∏ó‡∏∂‡∏ö (‡∏•‡∏¥‡∏ô‡∏¥‡∏ô)\n‚Ä¢ 70-90% = ‡∏•‡∏î‡πÅ‡∏™‡∏á‡∏°‡∏≤‡∏Å (Dimout)\n‚Ä¢ 95-100% = ‡∏°‡∏∑‡∏î‡∏™‡∏ô‡∏¥‡∏ó (Blackout)\n\n‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡∏ñ‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏∑‡∏î‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô" },
      { id:"1-3", title:"‡∏ú‡πâ‡∏≤‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô/‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î", content:"‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß:\n‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô ‚Üí Blackout + Sheer 2 ‡∏ä‡∏±‡πâ‡∏ô\n‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô ‚Üí Dimout / ‡∏°‡πà‡∏≤‡∏ô‡∏•‡∏≠‡∏ô\n\n‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î:\n‚Ä¢ ‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á ‚Üí Sunscreen / ‡∏°‡πà‡∏≤‡∏ô‡∏°‡πâ‡∏ß‡∏ô\n‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô ‚Üí Blackout ‡∏°‡πà‡∏≤‡∏ô‡∏°‡πâ‡∏ß‡∏ô\n\n‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®:\n‚Ä¢ ‡∏°‡πà‡∏≤‡∏ô‡∏°‡πâ‡∏ß‡∏ô Sunscreen + ‡∏£‡∏µ‡πÇ‡∏°‡∏ó" },
      { id:"1-4", title:"‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏£‡∏≤‡∏á‡∏°‡πà‡∏≤‡∏ô", content:"‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏á:\n‚Ä¢ ‡∏≠‡∏•‡∏π‡∏°‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏° ‚Äî ‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° ‡πÄ‡∏ö‡∏≤ ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô\n‚Ä¢ ‡∏™‡πÅ‡∏ï‡∏ô‡πÄ‡∏•‡∏™ ‚Äî ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏ú‡πâ‡∏≤‡∏´‡∏ô‡∏±‡∏Å\n‚Ä¢ ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (Motorized) ‚Äî ‡∏™‡∏±‡πà‡∏á‡∏£‡∏µ‡πÇ‡∏°‡∏ó/‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠\n‚Ä¢ ‡∏ó‡πà‡∏≠‡∏°‡πà‡∏≤‡∏ô (Rod) ‚Äî ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á ‡∏ß‡∏¥‡∏ô‡πÄ‡∏ó‡∏à\n\n‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏™‡∏£‡∏¥‡∏°:\n‚Ä¢ ‡∏ï‡∏∞‡∏Ç‡∏≠ (Hooks), ‡∏´‡πà‡∏ß‡∏á (Rings)\n‚Ä¢ ‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î‡∏£‡∏±‡∏î (Tiebacks)\n‚Ä¢ ‡∏Å‡∏•‡πà‡∏≠‡∏á Pelmet/Valance" },
      { id:"1-5", title:"‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç", content:"‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ:\n\n‚Ä¢ Fullness Ratio ‚Äî ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏à‡∏µ‡∏ö ‡πÄ‡∏ä‡πà‡∏ô x2\n‚Ä¢ GSM ‚Äî ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ú‡πâ‡∏≤‡∏ï‡πà‡∏≠‡∏ï‡∏£.‡∏°.\n‚Ä¢ Drop ‚Äî ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏á-‡∏ä‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á\n‚Ä¢ Stack-back ‚Äî ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î\n‚Ä¢ Leading Edge ‚Äî ‡∏Ç‡∏≠‡∏ö‡∏ú‡πâ‡∏≤‡∏Å‡∏•‡∏≤‡∏á\n‚Ä¢ Return ‚Äî ‡∏™‡πà‡∏ß‡∏ô‡∏û‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ú‡∏ô‡∏±‡∏á\n‚Ä¢ Heading ‚Äî ‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏ô‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô\n‚Ä¢ Hem ‚Äî ‡∏ä‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á" },
    ],
    quiz:[
      { q:"‡∏ú‡πâ‡∏≤ Blackout ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà %?", opts:["10-20%","40-60%","70-90%","95-100%"], ans:3 },
      { q:"‡∏ú‡πâ‡∏≤‡πÉ‡∏î‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á?", opts:["‡∏Å‡∏≥‡∏°‡∏∞‡∏´‡∏¢‡∏µ‡πà","Sunscreen","Blackout","‡∏•‡∏¥‡∏ô‡∏¥‡∏ô"], ans:1 },
      { q:"Fullness x2 ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á?", opts:["‡πÉ‡∏ä‡πâ‡∏ú‡πâ‡∏≤ 2 ‡∏ä‡∏±‡πâ‡∏ô","‡∏ú‡πâ‡∏≤‡∏Å‡∏ß‡πâ‡∏≤‡∏á 2 ‡πÄ‡∏ó‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á","‡∏£‡∏≤‡∏Ñ‡∏≤ 2 ‡πÄ‡∏ó‡πà‡∏≤","‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á 2 ‡πÄ‡∏ó‡πà‡∏≤"], ans:1 },
      { q:"‡∏£‡∏≤‡∏á‡πÉ‡∏î‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏ú‡πâ‡∏≤‡∏´‡∏ô‡∏±‡∏Å?", opts:["‡∏≠‡∏•‡∏π‡∏°‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏°","‡∏ó‡πà‡∏≠‡∏°‡πà‡∏≤‡∏ô","‡∏™‡πÅ‡∏ï‡∏ô‡πÄ‡∏•‡∏™","‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å"], ans:2 },
      { q:"GSM ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?", opts:["‡∏£‡∏≤‡∏Ñ‡∏≤/‡πÄ‡∏°‡∏ï‡∏£","‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ú‡πâ‡∏≤/‡∏ï‡∏£.‡∏°.","‡∏Ñ‡πà‡∏≤‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á","‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏≤‡∏á"], ans:1 },
      { q:"‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏ú‡πâ‡∏≤‡πÉ‡∏î?", opts:["Sheer","Sunscreen","Blackout","‡∏•‡∏¥‡∏ô‡∏¥‡∏ô"], ans:2 },
      { q:"Stack-back ‡∏Ñ‡∏∑‡∏≠?", opts:["‡∏ä‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á","‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î","‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏ô","‡πÄ‡∏Ç‡πá‡∏°‡∏Ç‡∏±‡∏î‡∏£‡∏±‡∏î"], ans:1 },
      { q:"Sheer ‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏™‡∏á‡∏Å‡∏µ‡πà %?", opts:["10-20%","50-60%","70-80%","90-100%"], ans:0 },
      { q:"‡∏°‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢?", opts:["‡∏£‡∏µ‡πÇ‡∏°‡∏ó‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß","‡∏£‡∏µ‡πÇ‡∏°‡∏ó+‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠+‡πÄ‡∏™‡∏µ‡∏¢‡∏á","‡∏î‡∏∂‡∏á‡πÄ‡∏ä‡∏∑‡∏≠‡∏Å","‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ú‡∏ô‡∏±‡∏á"], ans:1 },
      { q:"Dimout ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á‡∏Å‡∏µ‡πà %?", opts:["10-20%","40-60%","70-90%","95-100%"], ans:2 },
    ]
  },
  {
    id:2, title:"‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å", subtitle:"Product Expert", icon:"üîç", color:"#2196F3",
    lessons:[
      { id:"2-1", title:"‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤", content:"Framework ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö:\n\nBlackout: ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á 95-100% / ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á / ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô‡∏°‡∏≤‡∏Å\nDimout: ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á 70-90% / ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏•‡∏≤‡∏á / ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á\nSheer: ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á 10-20% / ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≥ / ‡∏ã‡∏±‡∏Å‡∏á‡πà‡∏≤‡∏¢\n\n‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£: ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡∏≤‡∏° Need ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤" },
      { id:"2-2", title:"‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û", content:"‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ Price Justification:\n\n1. ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô: ‡∏°‡πà‡∏≤‡∏ô 8,000 ‡∏ö‡∏≤‡∏ó ‡πÉ‡∏ä‡πâ 8 ‡∏õ‡∏µ = ‡∏ß‡∏±‡∏ô‡∏•‡∏∞ 3 ‡∏ö‡∏≤‡∏ó\n2. ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤: ‡∏ú‡πâ‡∏≤‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ ‡∏ó‡∏ô 5-8 ‡∏õ‡∏µ ‡πÑ‡∏°‡πà‡∏ã‡∏µ‡∏î + ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ü‡∏£‡∏µ\n3. Good-Better-Best: ‡πÄ‡∏™‡∏ô‡∏≠ 3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏°‡∏±‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏≤‡∏á\n4. ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î" },
      { id:"2-3", title:"‡∏Ç‡πâ‡∏≠‡∏î‡∏µ-‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó", content:"Blackout:\n‚úÖ ‡∏°‡∏∑‡∏î‡∏™‡∏ô‡∏¥‡∏ó ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô ‡∏Å‡∏±‡∏ô‡∏£‡πâ‡∏≠‡∏ô\n‚ùå ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á ‡∏´‡∏ô‡∏±‡∏Å\n\nDimout:\n‚úÖ ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏•‡∏≤‡∏á ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡πâ‡∏≠‡∏á\n‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏∑‡∏î 100%\n\nSheer:\n‚úÖ ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ö‡∏≤ ‡∏™‡∏ß‡πà‡∏≤‡∏á ‡∏ã‡∏±‡∏Å‡∏á‡πà‡∏≤‡∏¢\n‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß\n\nSunscreen:\n‚úÖ ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡∏¥‡∏ß ‡∏Å‡∏±‡∏ô UV\n‚ùå ‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏°‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô" },
      { id:"2-4", title:"Case Study ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á", content:"Case 1: ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ä‡∏±‡πâ‡∏ô 30 ‡∏ß‡∏¥‡∏ß‡∏™‡∏ß‡∏¢\n‚Ä¢ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÅ‡∏î‡∏î‡∏à‡∏±‡∏î‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡∏ö‡∏±‡∏á‡∏ß‡∏¥‡∏ß\n‚Ä¢ Solution: Sunscreen 5% + Blackout ‡∏°‡πâ‡∏ß‡∏ô‡∏ã‡πà‡∏≠‡∏ô\n‚Ä¢ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ Upsell ‡πÄ‡∏û‡∏¥‡πà‡∏° Blackout!\n\nCase 2: ‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà 4 ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô\n‚Ä¢ ‡∏á‡∏ö 50,000 ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á\n‚Ä¢ Solution: Blackout ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô + Dimout ‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô\n‚Ä¢ ‡∏¢‡∏≠‡∏î‡∏à‡∏£‡∏¥‡∏á: 62,000 (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤)" },
    ],
    quiz:[
      { q:"Good-Better-Best ‡∏Ñ‡∏∑‡∏≠?", opts:["‡πÄ‡∏™‡∏ô‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß","‡πÄ‡∏™‡∏ô‡∏≠ 3 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å","‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ","‡∏õ‡∏¥‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏£‡πá‡∏ß"], ans:1 },
      { q:"Sunscreen ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∑‡∏≠?", opts:["‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏û‡∏á‡∏°‡∏≤‡∏Å","‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏°‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô","‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å","‡∏ã‡∏±‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"], ans:1 },
      { q:"‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ñ‡∏∑‡∏≠?", opts:["‡∏ö‡∏≠‡∏Å‡∏ñ‡∏π‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô","‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô+‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤","‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏•‡∏¢","‡πÑ‡∏°‡πà‡∏û‡∏π‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤"], ans:1 },
      { q:"Dimout ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏•‡∏±‡∏Å?", opts:["‡πÅ‡∏û‡∏á‡∏°‡∏≤‡∏Å","‡πÑ‡∏°‡πà‡∏°‡∏∑‡∏î 100%","‡∏ã‡∏±‡∏Å‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ","‡πÑ‡∏°‡πà‡∏™‡∏ß‡∏¢"], ans:1 },
      { q:"Case ‡∏Ñ‡∏≠‡∏ô‡πÇ‡∏î‡∏ä‡∏±‡πâ‡∏ô 30 ‡πÉ‡∏ä‡πâ‡∏°‡πà‡∏≤‡∏ô‡∏≠‡∏∞‡πÑ‡∏£?", opts:["Blackout ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß","Sheer","Sunscreen+Blackout","‡∏°‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πâ"], ans:2 },
    ]
  },
  {
    id:3, title:"‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á", subtitle:"Field Operations", icon:"üîß", color:"#FF9800",
    lessons:[
      { id:"3-1", title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏¥‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ñ‡∏£‡πà‡∏≤‡∏ß‡πÜ", content:"‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:\n\n‡∏ú‡πâ‡∏≤ = (‡∏Å‡∏ß‡πâ‡∏≤‡∏á x Fullness) x ‡∏™‡∏π‡∏á x ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ú‡πâ‡∏≤/‡∏°.\n‡∏Ñ‡πà‡∏≤‡πÄ‡∏¢‡πá‡∏ö = ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô x 350 ‡∏ö‡∏≤‡∏ó\n‡∏£‡∏≤‡∏á = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á x ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≤‡∏á/‡∏°.\n\n‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á 2x2.4 ‡∏°. Dimout 550 ‡∏ö‡∏≤‡∏ó/‡∏°. ‡∏à‡∏µ‡∏ö x2\n‡∏ú‡πâ‡∏≤ = 4 x 2.4 x 550 = 5,280 ‡∏ö‡∏≤‡∏ó\n‡πÄ‡∏¢‡πá‡∏ö = 3 x 350 = 1,050 ‡∏ö‡∏≤‡∏ó\n‡∏£‡∏≤‡∏á = 2 x 400 = 800 ‡∏ö‡∏≤‡∏ó\n‡∏£‡∏ß‡∏° ‚âà 7,130 ‡∏ö‡∏≤‡∏ó" },
      { id:"3-2", title:"‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ß‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô", content:"‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÑ‡∏õ:\n1. ‡∏ï‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ï‡∏£ + ‡πÄ‡∏•‡πÄ‡∏ã‡∏≠‡∏£‡πå\n2. ‡∏™‡∏°‡∏∏‡∏î‡∏à‡∏î + ‡∏™‡πÄ‡∏Å‡πá‡∏ï‡∏ä‡πå\n3. ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ\n\n‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ß‡∏±‡∏î:\n1. ‡∏ß‡∏±‡∏î‡∏Å‡∏ß‡πâ‡∏≤‡∏á ‡∏Å‡∏£‡∏≠‡∏ö + ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≤‡∏á 15-20 ‡∏ã‡∏°.\n2. ‡∏ß‡∏±‡∏î‡∏™‡∏π‡∏á ‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏ï‡∏¥‡∏î‡∏£‡∏≤‡∏á ‚Üí ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£\n3. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á (‡πÅ‡∏≠‡∏£‡πå ‡∏£‡∏≤‡∏ß ‡∏õ‡∏•‡∏±‡πä‡∏Å)\n4. ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á\n5. ‡∏à‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å‡∏à‡∏∏‡∏î" },
      { id:"3-3", title:"‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô-‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á", content:"Flow ‡∏á‡∏≤‡∏ô:\n1. ‡∏£‡∏±‡∏ö Lead ‚Üí ‡∏ô‡∏±‡∏î‡∏ß‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô\n2. ‡∏ß‡∏±‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô + ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡πâ‡∏≤\n3. ‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏°.)\n4. ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô + ‡∏°‡∏±‡∏î‡∏à‡∏≥ 50%\n5. ‡∏™‡∏±‡πà‡∏á‡∏ú‡∏•‡∏¥‡∏ï (7-14 ‡∏ß‡∏±‡∏ô)\n6. ‡∏ô‡∏±‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á\n7. ‡∏ï‡∏£‡∏ß‡∏à‡∏á‡∏≤‡∏ô + ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠\n8. ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô + ‡∏Ç‡∏≠‡∏£‡∏µ‡∏ß‡∏¥‡∏ß" },
      { id:"3-4", title:"‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", content:"After-Sales:\n‚Ä¢ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå\n‚Ä¢ ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏≤‡∏á 3-5 ‡∏õ‡∏µ\n‚Ä¢ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤\n‚Ä¢ ‡∏Ç‡∏≠‡∏£‡∏π‡∏õ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß + ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô\n‚Ä¢ ‡πÇ‡∏õ‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤ ‡∏•‡∏î 10%\n\n‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤ 1 ‡∏Ñ‡∏ô = ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡∏°‡πà 2-3 ‡∏Ñ‡∏ô" },
    ],
    quiz:[
      { q:"Fullness x2 ‡πÉ‡∏ä‡πâ‡∏ú‡πâ‡∏≤‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?", opts:["‡πÄ‡∏ó‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á","2 ‡πÄ‡∏ó‡πà‡∏≤","3 ‡πÄ‡∏ó‡πà‡∏≤","‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á"], ans:1 },
      { q:"‡∏™‡πà‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏†‡∏≤‡∏¢‡∏¥‡∏ô‡∏Å‡∏µ‡πà‡∏ä‡∏°.?", opts:["1","12","24","168"], ans:2 },
      { q:"‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏Å‡∏µ‡πà %?", opts:["10%","30%","50%","100%"], ans:2 },
      { q:"‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ú‡∏•‡∏¥‡∏ï‡∏°‡πà‡∏≤‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ï‡∏±‡∏î?", opts:["1-2 ‡∏ß‡∏±‡∏ô","3-5 ‡∏ß‡∏±‡∏ô","7-14 ‡∏ß‡∏±‡∏ô","1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"], ans:2 },
      { q:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏£?", opts:["‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á","1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå","1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô","1 ‡∏õ‡∏µ"], ans:1 },
    ]
  },
  {
    id:4, title:"‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", subtitle:"Sales Mastery", icon:"üéØ", color:"#9C27B0",
    lessons:[
      { id:"4-1", title:"Opening Script", content:"Walk-in ‡∏£‡πâ‡∏≤‡∏ô:\n‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏û‡∏µ‡πà‡∏°‡∏≠‡∏á‡∏´‡∏≤‡∏°‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞?\n\nLINE/Chat:\n‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏Ç‡∏≠‡∏ñ‡∏≤‡∏° 3 ‡∏Ç‡πâ‡∏≠:\n1. ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏ß‡πâ‡∏≤‡∏á√ó‡∏™‡∏π‡∏á?\n2. ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏°‡∏∑‡∏î‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?\n3. ‡∏ä‡∏≠‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÑ‡∏´‡∏ô?\n\n‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:\n‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏°‡πà‡∏≤‡∏ô ‡∏Ç‡∏≠‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ô‡∏∞‡∏Ñ‡∏∞" },
      { id:"4-2", title:"‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Need", content:"5 ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏≠‡∏á:\n\n1. ‡∏°‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô?\n2. ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏á‡∏°‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?\n3. ‡∏ä‡∏≠‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÑ‡∏´‡∏ô? (Modern/Classic/Minimal)\n4. ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?\n5. ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏£?\n\n‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö: ‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠ ‡∏ü‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏à‡∏ö ‡∏≠‡∏¢‡πà‡∏≤‡∏Ç‡∏±‡∏î" },
      { id:"4-3", title:"‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", content:"‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏õ‡∏¥‡∏î‡∏î‡∏µ‡∏•:\n\n1. Assumptive Close:\n‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏≤‡∏á‡πÑ‡∏õ‡∏ß‡∏±‡∏î‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£‡∏î‡∏µ‡∏Ñ‡∏∞?\n\n2. Summary Close:\n‡∏™‡∏£‡∏∏‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Üí ‡∏ñ‡∏≤‡∏° confirm\n\n3. Trial Close:\n‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ ‡∏™‡∏ô‡πÉ‡∏à‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞?\n\n4. Urgency Close:\n‡πÇ‡∏õ‡∏£‡∏•‡∏î 15% ‡∏ñ‡∏∂‡∏á‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô\n\n5. Silence Close:\n‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß... ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡∏£‡∏≠‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à" },
      { id:"4-4", title:"‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÇ‡∏ï‡πâ‡πÅ‡∏¢‡πâ‡∏á", content:"‡πÅ‡∏û‡∏á‡πÑ‡∏õ:\n‚Üí ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô ‡∏ï‡∏Å‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á 5 ‡∏ö‡∏≤‡∏ó + ‡∏ü‡∏£‡∏µ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á + ‡∏°‡∏µ option ‡∏≠‡∏∑‡πà‡∏ô\n\n‡∏Ç‡∏≠‡∏Ñ‡∏¥‡∏î‡∏Å‡πà‡∏≠‡∏ô:\n‚Üí ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞? ‡∏™‡πà‡∏á‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏´‡πâ‡∏ó‡∏≤‡∏á LINE\n\n‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ñ‡∏π‡∏Å‡∏Å‡∏ß‡πà‡∏≤:\n‚Üí ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∑‡∏≠ ‡∏ú‡πâ‡∏≤‡πÄ‡∏Å‡∏£‡∏î‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ + ‡∏£‡∏≤‡∏á‡∏™‡πÅ‡∏ï‡∏ô‡πÄ‡∏•‡∏™ + ‡∏ä‡πà‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡πÇ‡∏õ‡∏£ + ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô 3 ‡∏õ‡∏µ\n\n‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°:\n‚Üí ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£ ‡∏™‡πà‡∏á‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏Å‡πà‡∏≠‡∏ô" },
    ],
    quiz:[
      { q:"Assumptive Close ‡∏Ñ‡∏∑‡∏≠?", opts:["‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡πÑ‡∏´‡∏°","‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î","‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏•‡∏¢","‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏£‡∏≠"], ans:1 },
      { q:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ö‡∏≠‡∏Å '‡πÅ‡∏û‡∏á‡πÑ‡∏õ' ‡∏Ñ‡∏ß‡∏£?", opts:["‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏•‡∏¢","‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô+‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤","‡∏ö‡∏≠‡∏Å‡πÑ‡∏°‡πà‡πÅ‡∏û‡∏á","‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á"], ans:1 },
      { q:"‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏ñ‡∏≤‡∏°?", opts:["‡∏á‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£","‡∏°‡πà‡∏≤‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô","‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢‡πÑ‡∏´‡∏°","‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏¢‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏≠‡∏∞‡πÑ‡∏£"], ans:1 },
      { q:"Silence Close ‡∏Ñ‡∏∑‡∏≠?", opts:["‡∏û‡∏π‡∏î‡πÄ‡∏¢‡∏≠‡∏∞","‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏£‡∏≠","‡∏õ‡∏¥‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏•‡∏¢","‡πÑ‡∏°‡πà‡∏û‡∏π‡∏î"], ans:1 },
    ]
  },
  {
    id:5, title:"Advanced Sales", subtitle:"Top Performer", icon:"üöÄ", color:"#E91E63",
    lessons:[
      { id:"5-1", title:"Upsell & Cross-sell", content:"Upsell:\n‚Ä¢ ‡∏°‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (+3,000-8,000/‡∏£‡∏≤‡∏á)\n‚Ä¢ ‡∏°‡πà‡∏≤‡∏ô 2 ‡∏ä‡∏±‡πâ‡∏ô (‡∏ó‡∏∂‡∏ö+‡πÇ‡∏õ‡∏£‡πà‡∏á)\n‚Ä¢ ‡∏ú‡πâ‡∏≤‡∏ã‡∏±‡∏ö‡πÉ‡∏ô (‡∏Å‡∏±‡∏ô‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°)\n‚Ä¢ ‡∏£‡∏≤‡∏á‡∏™‡πÅ‡∏ï‡∏ô‡πÄ‡∏•‡∏™‡πÅ‡∏ó‡∏ô‡∏≠‡∏•‡∏π‡∏Ø\n\nCross-sell:\n‚Ä¢ ‡∏°‡∏∏‡πâ‡∏á‡∏à‡∏µ‡∏ö ‡∏ß‡∏≠‡∏•‡πÄ‡∏õ‡πÄ‡∏õ‡∏≠‡∏£‡πå ‡∏û‡∏£‡∏°\n‚Ä¢ ‡∏°‡πà‡∏≤‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô\n\n‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: Upsell +20% ‡∏ó‡∏∏‡∏Å‡∏ö‡∏¥‡∏•" },
      { id:"5-2", title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£", content:"‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£:\n\n1. ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£\n2. ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠\n3. ‡∏™‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡πâ‡∏≤ + ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©\n4. ‡πÄ‡∏à‡∏£‡∏à‡∏≤ Volume Discount\n5. ‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤ + Timeline\n6. ‡∏ú‡∏•‡∏¥‡∏ï + ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô\n\n‡∏á‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ 1 ‡∏á‡∏≤‡∏ô = ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ 10-50 ‡πÄ‡∏ó‡πà‡∏≤ retail" },
      { id:"5-3", title:"‡∏ó‡∏≥‡∏¢‡∏≠‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤", content:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥‡∏¢‡∏≠‡∏î‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤:\n\n1. ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏≤‡∏°‡∏™‡∏∏‡∏Ç 3-6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô\n2. ‡πÄ‡∏™‡∏ô‡∏≠‡πÇ‡∏õ‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤ (‡∏•‡∏î 10-15%)\n3. ‡∏ñ‡∏≤‡∏°‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡πÑ‡∏´‡∏°\n4. ‡∏Ç‡∏≠ Referral: ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‡∏•‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©\n5. ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô Portfolio\n\n‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 30% ‡∏¢‡∏≠‡∏î‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤+Referral" },
      { id:"5-4", title:"‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£ Pipeline", content:"Sales Pipeline:\n\nLead ‚Üí Qualified ‚Üí Proposal ‚Üí Negotiation ‚Üí Closed Won ‚Üí Production ‚Üí Installed\n\nDay 0: ‡∏£‡∏±‡∏ö inquiry\nDay 0-1: ‡∏ñ‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£\nDay 1-2: ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤\nDay 2-5: ‡πÄ‡∏à‡∏£‡∏à‡∏≤\nDay 3-7: ‡∏õ‡∏¥‡∏î‡∏î‡∏µ‡∏•\nDay 7-21: ‡∏ú‡∏•‡∏¥‡∏ï\nDay 14-28: ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á\n\nKPI: ‡∏õ‡∏¥‡∏î‡∏î‡∏µ‡∏•‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 7 ‡∏ß‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤" },
    ],
    quiz:[
      { q:"‡πÄ‡∏õ‡πâ‡∏≤ Upsell ‡∏ï‡πà‡∏≠‡∏ö‡∏¥‡∏•?", opts:["+5%","+10%","+20%","+50%"], ans:2 },
      { q:"‡∏á‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ = retail ‡∏Å‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤?", opts:["2-3","5-7","10-50","100"], ans:2 },
      { q:"‡∏¢‡∏≠‡∏î‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏Ñ‡∏ß‡∏£ %?", opts:["10%","20%","30%","50%"], ans:2 },
      { q:"‡∏õ‡∏¥‡∏î‡∏î‡∏µ‡∏•‡∏†‡∏≤‡∏¢‡∏¥‡∏ô‡∏Å‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤?", opts:["1","3","7","30"], ans:2 },
    ]
  },
];

const SCRIPTS_DATA = [
  { cat:"‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡∏ó‡∏™‡∏ô‡∏ó‡∏ô‡∏≤", items:[
    { title:"Walk-in ‡∏£‡πâ‡∏≤‡∏ô", text:"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏û‡∏µ‡πà‡∏°‡∏≠‡∏á‡∏´‡∏≤‡∏°‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞ ‚Äî ‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏°‡πà‡∏≤‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏Ñ‡∏∞?" },
    { title:"LINE/Chat", text:"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏°‡πà‡∏≤‡∏ô‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö ‡∏Ç‡∏≠‡∏ñ‡∏≤‡∏° 3 ‡∏Ç‡πâ‡∏≠‡∏ô‡∏∞‡∏Ñ‡∏∞:\n1Ô∏è‚É£ ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏ß‡πâ‡∏≤‡∏á√ó‡∏™‡∏π‡∏á‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?\n2Ô∏è‚É£ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏°‡∏∑‡∏î‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?\n3Ô∏è‚É£ ‡∏ä‡∏≠‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÑ‡∏´‡∏ô?" },
    { title:"‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå", text:"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤‡∏û‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à‡∏°‡πà‡∏≤‡∏ô ‡∏Ç‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞" },
  ]},
  { cat:"‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏¢‡∏≠‡∏î‡∏Æ‡∏¥‡∏ï", items:[
    { title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?", text:"‡∏°‡πà‡∏≤‡∏ô‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏Å‡∏£‡∏î ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà 1,500-20,000+ ‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á ‡∏Ç‡∏≠‡∏ó‡∏£‡∏≤‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞ ‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á" },
    { title:"‡∏Å‡∏µ‡πà‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ?", text:"‡∏õ‡∏Å‡∏ï‡∏¥ 7-14 ‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ ‡∏ú‡πâ‡∏≤‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏à 3-4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ‡πÅ‡∏à‡πâ‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ï‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ñ‡πà‡∏∞" },
    { title:"‡∏ã‡∏±‡∏Å‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°?", text:"‡πÇ‡∏û‡∏•‡∏µ‡πÄ‡∏≠‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ã‡∏±‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡πÄ‡∏¢‡πá‡∏ô‡πÑ‡∏î‡πâ / ‡∏•‡∏¥‡∏ô‡∏¥‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ã‡∏±‡∏Å‡πÅ‡∏´‡πâ‡∏á / ‡∏°‡πà‡∏≤‡∏ô‡∏°‡πâ‡∏ß‡∏ô‡πÄ‡∏ä‡πá‡∏î‡∏ú‡πâ‡∏≤‡∏ä‡∏∏‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏≤‡∏î‡πÜ" },
  ]},
  { cat:"‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢", items:[
    { title:"Assumptive Close", text:"‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏≤‡∏á‡πÑ‡∏õ‡∏ß‡∏±‡∏î‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£‡∏î‡∏µ‡∏Ñ‡∏∞?" },
    { title:"Urgency Close", text:"‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÇ‡∏õ‡∏£‡∏•‡∏î 15% ‡∏ñ‡∏∂‡∏á‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏™‡∏ô‡πÉ‡∏à‡∏à‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞?" },
    { title:"Summary Close", text:"‡∏™‡∏£‡∏∏‡∏õ ‚Äî Blackout 3 ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á + Sheer ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô + ‡∏£‡∏≤‡∏á‡∏™‡πÅ‡∏ï‡∏ô‡πÄ‡∏•‡∏™ ‡∏£‡∏ß‡∏° XX ‡∏ö‡∏≤‡∏ó ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ü‡∏£‡∏µ confirm ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞" },
  ]},
  { cat:"Follow up", items:[
    { title:"‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ 2 ‡∏ß‡∏±‡∏ô", text:"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡πÉ‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ ‡∏°‡∏µ‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô‡∏™‡∏á‡∏™‡∏±‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞? ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ ‡∏ü‡∏£‡∏µ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏∞" },
    { title:"‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå", text:"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏°‡πà‡∏≤‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏ö‡πâ‡∏≤‡∏á‡∏Ñ‡∏∞? ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏´‡∏°? ‡∏ñ‡πâ‡∏≤‡πÇ‡∏≠‡πÄ‡∏Ñ ‡∏Ç‡∏≠‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞ üôè" },
    { title:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô", text:"‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏°‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏î‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞? ‡∏°‡∏µ‡πÇ‡∏õ‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏•‡∏î 10% ‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡πÑ‡∏´‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞" },
  ]},
];

const FABRIC_PRICES = [
  { name:"Sheer/Voile", price:300 },
  { name:"Dimout", price:550 },
  { name:"Blackout", price:800 },
  { name:"Sunscreen", price:600 },
  { name:"‡∏•‡∏¥‡∏ô‡∏¥‡∏ô", price:1000 },
  { name:"‡∏Å‡∏≥‡∏°‡∏∞‡∏´‡∏¢‡∏µ‡πà", price:1500 },
];
const RAIL_PRICES = [
  { name:"‡∏≠‡∏•‡∏π‡∏°‡∏¥‡πÄ‡∏ô‡∏µ‡∏¢‡∏°", price:400 },
  { name:"‡∏™‡πÅ‡∏ï‡∏ô‡πÄ‡∏•‡∏™", price:700 },
  { name:"‡πÑ‡∏ü‡∏ü‡πâ‡∏≤", price:3500 },
];

const CSS = `
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700;800&display=swap');
:root{--bg:#F5F6FA;--sf:#FFFFFF;--sf2:#F0F1F5;--sf3:#E4E6EE;--bd:#D8DBE5;--tx:#1A1D2E;--tx2:#6B7086;--tx3:#9498AC;--ac:#6C5CE7;--ac2:#5A4BD4;--acbg:rgba(108,92,231,.07);--gn:#00B894;--gnbg:rgba(0,184,148,.08);--or:#E17055;--orbg:rgba(225,112,85,.08);--rd:#E74C3C;--rdbg:rgba(231,76,60,.08);--bl:#3498DB;--blbg:rgba(52,152,219,.08);--pk:#E84393;--r:14px;--r2:10px;--r3:8px;--sh:0 2px 12px rgba(0,0,0,.06);--f:'IBM Plex Sans Thai','Outfit',sans-serif}
*{margin:0;padding:0;box-sizing:border-box}
.app{font-family:var(--f);background:var(--bg);color:var(--tx);min-height:100vh;line-height:1.6}
.lp{min-height:100vh;display:flex;overflow:hidden}
.ll{flex:1;display:flex;flex-direction:column;justify-content:center;padding:60px;z-index:1}
.lr{flex:1;background:linear-gradient(135deg,#6C5CE7,#4834d4);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.lr::before{content:'';position:absolute;width:500px;height:500px;border-radius:50%;background:rgba(255,255,255,.1);top:-100px;right:-100px}
.lh{text-align:center;z-index:1;position:relative;color:#fff}
.lh .ic{font-size:80px;margin-bottom:20px}
.lh h2{font-family:Outfit;font-size:28px;font-weight:700;margin-bottom:8px}
.lh p{opacity:.8;font-size:15px;max-width:300px}
.lf{max-width:400px}
.logo{font-family:Outfit;font-size:28px;font-weight:800;margin-bottom:8px}
.logo span{color:var(--ac)}
.lsub{color:var(--tx2);font-size:14px;margin-bottom:40px}
.fg{margin-bottom:18px}
.fg label{display:block;font-size:12px;font-weight:600;color:var(--tx2);margin-bottom:6px;text-transform:uppercase;letter-spacing:1px}
.fg input{width:100%;padding:14px 16px;background:var(--sf);border:1px solid var(--bd);border-radius:var(--r2);color:var(--tx);font-family:var(--f);font-size:15px}
.fg input:focus{outline:none;border-color:var(--ac)}
.lbtn{width:100%;padding:14px;background:#6C5CE7;color:#fff;border:none;border-radius:var(--r2);font-family:var(--f);font-size:15px;font-weight:600;cursor:pointer;margin-top:8px}
.lbtn:hover{background:#5a4bd4}
.lerr{color:var(--rd);font-size:13px;margin-top:8px}
.da{margin-top:32px;padding:18px;background:var(--sf);border-radius:var(--r2);border:1px solid var(--bd)}
.da h4{font-size:12px;color:var(--tx2);margin-bottom:10px;text-transform:uppercase;letter-spacing:1px}
.dr{display:flex;justify-content:space-between;padding:6px 0;font-size:13px;color:var(--tx3);cursor:pointer}
.dr:hover{color:var(--ac2)}
.dr span:first-child{color:var(--tx)}
.layout{display:flex;min-height:100vh}
.sb{width:260px;background:#FFFFFF;border-right:1px solid var(--bd);box-shadow:2px 0 12px rgba(0,0,0,.04);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:100}
.sb-logo{padding:24px 20px;border-bottom:1px solid var(--bd);font-family:Outfit;font-weight:800;font-size:20px}
.sb-logo span{color:var(--ac)}
.sb-nav{flex:1;padding:12px 10px;overflow-y:auto}
.ni{display:flex;align-items:center;gap:10px;padding:11px 14px;border-radius:var(--r3);color:var(--tx2);font-size:14px;font-weight:500;cursor:pointer;margin-bottom:2px}
.ni:hover{background:var(--sf2);color:var(--tx)}
.ni.on{background:var(--acbg);color:var(--ac2)}
.ni .ic{font-size:18px;width:24px;text-align:center}
.ndv{height:1px;background:var(--bd);margin:10px 14px}
.su{padding:16px 20px;border-top:1px solid var(--bd);display:flex;align-items:center;gap:10px}
.su .av{font-size:28px}
.su .nm{font-size:14px;font-weight:600}
.rb{display:inline-block;font-size:10px;font-weight:700;padding:2px 8px;border-radius:4px;text-transform:uppercase;letter-spacing:.5px}
.lob{background:none;border:none;color:var(--tx3);cursor:pointer;font-size:16px;padding:6px;border-radius:6px}
.lob:hover{background:var(--rdbg);color:var(--rd)}
.mn{flex:1;margin-left:260px;min-height:100vh}
.mh{padding:20px 32px;border-bottom:1px solid var(--bd);display:flex;align-items:center;justify-content:space-between;background:rgba(245,246,250,.85);backdrop-filter:blur(10px);position:sticky;top:0;z-index:50}
.mt{font-family:Outfit;font-size:22px;font-weight:700}
.mc{padding:28px 32px}
.card{background:#fff;border:1px solid var(--bd);border-radius:var(--r);padding:24px;transition:all .2s;box-shadow:0 1px 4px rgba(0,0,0,.04)}
.card:hover{border-color:var(--ac)}
.cg{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px;margin-bottom:24px}
.sc{text-align:center}
.sc .si{font-size:32px;margin-bottom:10px}
.sc .sv{font-family:Outfit;font-size:32px;font-weight:800}
.sc .sl{font-size:13px;color:var(--tx2);margin-top:4px}
.lc{background:var(--sf);border:1px solid var(--bd);border-radius:var(--r);padding:24px;display:flex;align-items:center;gap:20px;cursor:pointer;transition:all .2s;margin-bottom:14px}
.lc:hover{border-color:var(--ac);transform:translateX(4px)}
.lc.lk{opacity:.5;cursor:not-allowed}
.lc.lk:hover{transform:none;border-color:var(--bd)}
.li{font-size:40px;width:60px;height:60px;border-radius:16px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.linf{flex:1}
.linf h3{font-size:17px;font-weight:700;margin-bottom:2px}
.linf p{font-size:13px;color:var(--tx2)}
.lpb{height:6px;background:var(--sf3);border-radius:3px;margin-top:10px;overflow:hidden}
.lpf{height:100%;border-radius:3px;transition:width .5s}
.lbd{font-size:11px;font-weight:700;padding:4px 12px;border-radius:20px;white-space:nowrap}
.lli{display:flex;align-items:center;gap:14px;padding:16px 20px;background:var(--sf);border:1px solid var(--bd);border-radius:var(--r2);margin-bottom:10px;cursor:pointer;transition:all .15s}
.lli:hover{border-color:var(--ac);background:var(--sf2)}
.lli.dn{border-color:var(--gn)}
.lck{width:24px;height:24px;border-radius:50%;border:2px solid var(--bd);display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0}
.lli.dn .lck{background:var(--gn);border-color:var(--gn);color:#fff}
.cv{background:var(--sf);border:1px solid var(--bd);border-radius:var(--r);padding:36px;max-width:800px}
.cv h2{font-family:Outfit;font-size:24px;font-weight:700;margin-bottom:20px}
.cb{font-size:14px;line-height:1.8;white-space:pre-wrap}
.cn{display:flex;gap:10px;margin-top:28px}
.btn{padding:10px 20px;border:none;border-radius:var(--r3);font-family:var(--f);font-size:14px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:6px}
.bp{background:var(--ac);color:#fff}.bp:hover{background:#5a4bd4}
.bg{background:var(--sf2);color:var(--tx);border:1px solid var(--bd)}.bg:hover{border-color:var(--ac)}
.bgn{background:var(--gn);color:#fff}.bgn:hover{background:#00a382}
.bs{padding:7px 14px;font-size:13px}
.qc{max-width:700px}
.qp{display:flex;gap:4px;margin-bottom:16px}
.qd{flex:1;height:4px;border-radius:2px;background:var(--sf3)}
.qd.dn{background:var(--gn)}.qd.cur{background:var(--ac)}
.qq{font-size:18px;font-weight:600;margin-bottom:20px}
.qqn{color:var(--ac2);font-size:13px;margin-bottom:6px}
.qo{display:block;width:100%;text-align:left;padding:14px 18px;background:var(--sf);border:1px solid var(--bd);border-radius:var(--r2);color:var(--tx);font-family:var(--f);font-size:14px;cursor:pointer;margin-bottom:8px}
.qo:hover{border-color:var(--ac);background:var(--acbg)}
.qo.sel{border-color:var(--ac);background:var(--acbg)}
.qo.ok{border-color:var(--gn);background:var(--gnbg);color:var(--gn)}
.qo.no{border-color:var(--rd);background:var(--rdbg);color:var(--rd)}
.qr{text-align:center;padding:40px}
.qr .scr{font-family:Outfit;font-size:64px;font-weight:800}
.qr .pass{color:var(--gn)}.qr .fail{color:var(--rd)}
.clc{max-width:600px}
.clr{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:14px}
.clf label{display:block;font-size:12px;font-weight:600;color:var(--tx2);margin-bottom:5px}
.clf input,.clf select{width:100%;padding:12px 14px;background:var(--sf2);border:1px solid var(--bd);border-radius:var(--r3);color:var(--tx);font-family:var(--f);font-size:14px}
.clf input:focus,.clf select:focus{outline:none;border-color:var(--ac)}
.clres{margin-top:20px;padding:24px;background:var(--acbg);border:1px solid var(--ac);border-radius:var(--r)}
.clres .pr{font-family:Outfit;font-size:36px;font-weight:800;color:var(--ac2)}
.clres .dt{font-size:13px;color:var(--tx2);margin-top:8px;line-height:1.8}
.scat{margin-bottom:28px}
.scat h3{font-size:16px;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:8px}
.si2{background:var(--sf);border:1px solid var(--bd);border-radius:var(--r2);padding:18px;margin-bottom:10px;cursor:pointer}
.si2:hover{border-color:var(--ac)}
.si2 h4{font-size:14px;font-weight:600;margin-bottom:6px;color:var(--ac2)}
.si2 p{font-size:13px;color:var(--tx2);white-space:pre-wrap;line-height:1.6}
.cpb{font-size:11px;background:var(--sf3);border:none;color:var(--tx2);padding:4px 10px;border-radius:4px;cursor:pointer;margin-top:8px;font-family:var(--f)}
.cpb:hover{background:var(--ac);color:#fff}
.tt{width:100%;border-collapse:collapse}
.tt th{text-align:left;padding:10px 14px;font-size:12px;color:var(--tx3);font-weight:600;text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid var(--bd)}
.tt td{padding:12px 14px;font-size:14px;border-bottom:1px solid var(--bd)}
.tt tr:hover td{background:var(--sf2)}
.badge{display:inline-flex;align-items:center;gap:4px;font-size:11px;font-weight:700;padding:3px 10px;border-radius:20px}
.b-gn{background:var(--gnbg);color:var(--gn)}
.b-or{background:var(--orbg);color:var(--or)}
.b-rd{background:var(--rdbg);color:var(--rd)}
.b-bl{background:var(--blbg);color:var(--bl)}
.b-pu{background:var(--acbg);color:var(--ac2)}
.asr{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:24px}
.as{background:var(--sf);border:1px solid var(--bd);border-radius:var(--r2);padding:18px;text-align:center}
.as .v{font-family:Outfit;font-size:28px;font-weight:800}
.as .l{font-size:12px;color:var(--tx2)}
.tr{display:flex;gap:4px;margin-bottom:24px;background:var(--sf);padding:4px;border-radius:var(--r2);border:1px solid var(--bd)}
.tb{padding:9px 18px;border:none;background:none;font-family:var(--f);font-size:13px;font-weight:600;color:var(--tx3);border-radius:var(--r3);cursor:pointer}
.tb:hover{color:var(--tx)}.tb.on{background:var(--ac);color:#fff}

.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.35);backdrop-filter:blur(4px);z-index:200;display:flex;align-items:center;justify-content:center;animation:fadeIn .2s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.modal{background:#fff;border:1px solid var(--bd);border-radius:var(--r);padding:32px;width:90%;max-width:560px;max-height:85vh;overflow-y:auto;animation:slideUp .25s ease-out;box-shadow:0 20px 60px rgba(0,0,0,.15)}
.modal h2{font-family:Outfit;font-size:20px;font-weight:700;margin-bottom:20px;display:flex;align-items:center;gap:10px}
.modal-close{position:absolute;top:16px;right:16px;background:none;border:none;color:var(--tx3);font-size:20px;cursor:pointer;padding:4px 8px;border-radius:6px}
.modal-close:hover{background:var(--rdbg);color:var(--rd)}
.mfg{margin-bottom:16px}
.mfg label{display:block;font-size:12px;font-weight:600;color:var(--tx2);margin-bottom:5px;text-transform:uppercase;letter-spacing:.5px}
.mfg input,.mfg select,.mfg textarea{width:100%;padding:11px 14px;background:var(--sf2);border:1px solid var(--bd);border-radius:var(--r3);color:var(--tx);font-family:var(--f);font-size:14px}
.mfg input:focus,.mfg select:focus,.mfg textarea:focus{outline:none;border-color:var(--ac)}
.mfg textarea{min-height:80px;resize:vertical}
.mfr{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:24px;padding-top:16px;border-top:1px solid var(--bd)}
.btn-danger{background:var(--rd);color:#fff}.btn-danger:hover{background:#c0392b}

.mfg textarea{min-height:80px;resize:vertical;font-size:13px;line-height:1.7}
.mfg select option{background:var(--sf);color:var(--tx)}

.media-block{margin:16px 0;border-radius:10px;overflow:hidden;border:1px solid var(--bd);background:var(--sf2)}
.media-block img{width:100%;display:block;max-height:400px;object-fit:contain;background:#f0f0f5}
.media-block .vid-wrap{position:relative;padding-bottom:56.25%;height:0;overflow:hidden}
.media-block .vid-wrap iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0}
.media-block .caption{padding:8px 12px;font-size:12px;color:var(--tx3);text-align:center}
.media-editor{border:1px dashed var(--bd);border-radius:8px;padding:14px;margin-bottom:10px;background:var(--sf2)}
.media-editor .me-head{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.media-editor .me-type{display:flex;gap:4px}
.media-editor .me-type button{padding:4px 12px;border-radius:6px;border:1px solid var(--bd);background:var(--sf);color:var(--tx2);font-size:12px;cursor:pointer;font-family:var(--f)}
.media-editor .me-type button.on{background:var(--ac);color:#fff;border-color:var(--ac)}
.toast{position:fixed;bottom:24px;right:24px;background:var(--gn);color:#fff;padding:12px 20px;border-radius:var(--r3);font-size:14px;font-weight:600;z-index:300;animation:slideUp .3s ease-out;box-shadow:0 4px 20px rgba(0,0,0,.3)}
@keyframes loading{0%{width:20%;margin-left:0}50%{width:60%;margin-left:20%}100%{width:20%;margin-left:80%}}
@media(max-width:768px){.lr{display:none}.ll{padding:30px}.sb{display:none}.mn{margin-left:0}.mc{padding:16px}.cg{grid-template-columns:1fr}.clr{grid-template-columns:1fr}.asr{grid-template-columns:1fr 1fr}}
`;




// === LOGO ASSETS ===
const LOGO_ICON = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZzEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjN0M2QkYwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjNkM1Q0U3Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzUyNDFDQyIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZzIiIHgxPSIwIiB5MT0iMCIgeDI9IjAiIHkyPSIxIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI0ZGRkZGRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNFMERBRkYiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImczIiB4MT0iMCIgeTE9IjAiIHgyPSIwIiB5Mj0iMSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGRkZGRkYiIHN0b3Atb3BhY2l0eT0iLjc1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0M4QkZGRiIgc3RvcC1vcGFjaXR5PSIuNiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZ29sZCIgeDE9IjAiIHkxPSIwIiB4Mj0iMSIgeTI9IjAiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjREMDNGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iNDAlIiBzdG9wLWNvbG9yPSIjRkZFQUE3Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y0RDAzRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxmaWx0ZXIgaWQ9ImRzIj4KICAgICAgPGZlRHJvcFNoYWRvdyBkeD0iMCIgZHk9IjgiIHN0ZERldmlhdGlvbj0iMTYiIGZsb29kLWNvbG9yPSIjM0QyQjhDIiBmbG9vZC1vcGFjaXR5PSIuMzUiLz4KICAgIDwvZmlsdGVyPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwIj48cmVjdCB4PSIzMiIgeT0iMzIiIHdpZHRoPSI0NDgiIGhlaWdodD0iNDQ4IiByeD0iMTAwIi8+PC9jbGlwUGF0aD4KICA8L2RlZnM+CgogIDwhLS0gQkcgLS0+CiAgPHJlY3QgeD0iMzIiIHk9IjMyIiB3aWR0aD0iNDQ4IiBoZWlnaHQ9IjQ0OCIgcng9IjEwMCIgZmlsbD0idXJsKCNnMSkiIGZpbHRlcj0idXJsKCNkcykiLz4KICA8IS0tIEdsb3cgb3JicyAtLT4KICA8ZyBjbGlwLXBhdGg9InVybCgjY2xpcCkiPgogICAgPGNpcmNsZSBjeD0iMTQwIiBjeT0iMTIwIiByPSIxNjAiIGZpbGw9IiM4QjdDRjciIG9wYWNpdHk9Ii4zIi8+CiAgICA8Y2lyY2xlIGN4PSI0MDAiIGN5PSI0MDAiIHI9IjE0MCIgZmlsbD0iIzRBM0FCNSIgb3BhY2l0eT0iLjMiLz4KICA8L2c+CgogIDwhLS0gQ3VydGFpbiByYWlsIC0tPgogIDxyZWN0IHg9IjEwMCIgeT0iMTI4IiB3aWR0aD0iMzEyIiBoZWlnaHQ9IjEwIiByeD0iNSIgZmlsbD0idXJsKCNnb2xkKSIvPgogIDxjaXJjbGUgY3g9IjEwMCIgY3k9IjEzMyIgcj0iMTIiIGZpbGw9IiNGNEQwM0YiLz4KICA8Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMzMiIHI9IjUuNSIgZmlsbD0iI0ZGRjhEQyIvPgogIDxjaXJjbGUgY3g9IjQxMiIgY3k9IjEzMyIgcj0iMTIiIGZpbGw9IiNGNEQwM0YiLz4KICA8Y2lyY2xlIGN4PSI0MTIiIGN5PSIxMzMiIHI9IjUuNSIgZmlsbD0iI0ZGRjhEQyIvPgoKICA8IS0tIExlZnQgY3VydGFpbiDigJQgMyB3YXZlIGZvbGRzIC0tPgogIDxwYXRoIGQ9IgogICAgTTExMiAxMzgKICAgIEMxMDggMTgwLDEwMiAyMzAsMTA4IDI4MAogICAgQzExNCAzMzAsMTA0IDM2MCwxMTAgMzk1CiAgICBMMTM0IDM5NQogICAgQzE0MCAzNjAsMTMwIDMyNSwxMzYgMjgwCiAgICBDMTQyIDIzMCwxMzYgMTg1LDE0MCAxMzgKICAgIFoiIGZpbGw9InVybCgjZzIpIi8+CiAgPHBhdGggZD0iCiAgICBNMTQwIDEzOAogICAgQzEzNiAxODUsMTMwIDIzMCwxMzYgMjgwCiAgICBDMTQyIDMyNSwxMzIgMzYwLDEzOCAzOTUKICAgIEwxNjIgMzk1CiAgICBDMTY4IDM2MCwxNTggMzI1LDE2NCAyODAKICAgIEMxNzAgMjMwLDE2NCAxODUsMTY4IDEzOAogICAgWiIgZmlsbD0idXJsKCNnMikiIG9wYWNpdHk9Ii44OCIvPgogIDxwYXRoIGQ9IgogICAgTTE2OCAxMzgKICAgIEMxNjQgMTg1LDE1OCAyMzUsMTY0IDI4MAogICAgQzE3MCAzMzAsMTYwIDM2MCwxNjYgMzk1CiAgICBMMTk0IDM5NQogICAgQzIwMCAzNjAsMTkwIDMyNSwxOTYgMjgwCiAgICBDMjAyIDIzMCwxOTYgMTg1LDIwMCAxMzgKICAgIFoiIGZpbGw9InVybCgjZzIpIiBvcGFjaXR5PSIuNzYiLz4KICA8IS0tIEZvbGQgaGlnaGxpZ2h0cyAtLT4KICA8cGF0aCBkPSJNMTI2IDE1NSBDMTI0IDIyMCwxMjAgMzAwLDEyNyAzOTAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iLjUiIGZpbGw9Im5vbmUiLz4KICA8cGF0aCBkPSJNMTU0IDE1NSBDMTUyIDIyMCwxNDggMzAwLDE1NSAzOTAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIuMzUiIGZpbGw9Im5vbmUiLz4KICA8cGF0aCBkPSJNMTgyIDE1NSBDMTgwIDIyNSwxNzYgMzAwLDE4MyAzOTAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIvPgoKICA8IS0tIFJpZ2h0IGN1cnRhaW4g4oCUIDMgd2F2ZSBmb2xkcyAtLT4KICA8cGF0aCBkPSIKICAgIE0zMTIgMTM4CiAgICBDMzE2IDE4NSwzMTAgMjMwLDMxNiAyODAKICAgIEMzMjIgMzI1LDMxMiAzNjAsMzE4IDM5NQogICAgTDM0NiAzOTUKICAgIEMzNTIgMzYwLDM0MiAzMzAsMzQ4IDI4MAogICAgQzM1NCAyMzAsMzQ4IDE4NSwzNTIgMTM4CiAgICBaIiBmaWxsPSJ1cmwoI2czKSIvPgogIDxwYXRoIGQ9IgogICAgTTM0NCAxMzgKICAgIEMzNDggMTg1LDM0MiAyMzAsMzQ4IDI4MAogICAgQzM1NCAzMjUsMzQ0IDM2MCwzNTAgMzk1CiAgICBMMzc4IDM5NQogICAgQzM4NCAzNjAsMzc0IDMzMCwzODAgMjgwCiAgICBDMzg2IDIzMCwzODAgMTg1LDM4NCAxMzgKICAgIFoiIGZpbGw9InVybCgjZzMpIiBvcGFjaXR5PSIuODgiLz4KICA8cGF0aCBkPSIKICAgIE0zNzYgMTM4CiAgICBDMzgwIDE4NSwzNzQgMjM1LDM4MCAyODAKICAgIEMzODYgMzMwLDM3NiAzNjAsMzgyIDM5NQogICAgTDQwMiAzOTUKICAgIEM0MDggMzYwLDM5OCAzMzAsNDA0IDI4MAogICAgQzQxMCAyMzAsNDA0IDE4MCw0MDAgMTM4CiAgICBaIiBmaWxsPSJ1cmwoI2czKSIgb3BhY2l0eT0iLjc2Ii8+CiAgPCEtLSBGb2xkIGhpZ2hsaWdodHMgLS0+CiAgPHBhdGggZD0iTTMzMCAxNTUgQzMzMiAyMjAsMzM2IDMwMCwzMjkgMzkwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIG9wYWNpdHk9Ii40IiBmaWxsPSJub25lIi8+CiAgPHBhdGggZD0iTTM2MiAxNTUgQzM2NCAyMjAsMzY4IDMwMCwzNjEgMzkwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEuNSIgb3BhY2l0eT0iLjMiIGZpbGw9Im5vbmUiLz4KICA8cGF0aCBkPSJNMzkwIDE1NSBDMzkyIDIyNSwzOTQgMzAwLDM4OSAzOTAiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIuMjUiIGZpbGw9Im5vbmUiLz4KCiAgPCEtLSBDZW50ZXIgd2luZG93IGxpZ2h0IC0tPgogIDxyZWN0IHg9IjIxMCIgeT0iMTU1IiB3aWR0aD0iOTIiIGhlaWdodD0iMTQwIiByeD0iNiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9Ii4xMiIvPgogIDxsaW5lIHgxPSIyNTYiIHkxPSIxNTgiIHgyPSIyNTYiIHkyPSIyOTIiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBvcGFjaXR5PSIuMTIiLz4KICA8bGluZSB4MT0iMjEzIiB5MT0iMjI1IiB4Mj0iMjk5IiB5Mj0iMjI1IiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEuNSIgb3BhY2l0eT0iLjEyIi8+CgogIDwhLS0gU3RhciAvIHNwYXJrbGUgYWNjZW50IC0tPgogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1NiwyMTUpIiBvcGFjaXR5PSIuNyI+CiAgICA8cGF0aCBkPSJNMCwtMTYgTDMsLTMgTDE2LDAgTDMsMyBMMCwxNiBMLTMsMyBMLTE2LDAgTC0zLC0zIFoiIGZpbGw9IndoaXRlIi8+CiAgPC9nPgogIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIzNiwxODUpIHNjYWxlKC41KSIgb3BhY2l0eT0iLjQiPgogICAgPHBhdGggZD0iTTAsLTE2IEwzLC0zIEwxNiwwIEwzLDMgTDAsMTYgTC0zLDMgTC0xNiwwIEwtMywtMyBaIiBmaWxsPSJ3aGl0ZSIvPgogIDwvZz4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNzgsMjUwKSBzY2FsZSguNCkiIG9wYWNpdHk9Ii4zNSI+CiAgICA8cGF0aCBkPSJNMCwtMTYgTDMsLTMgTDE2LDAgTDMsMyBMMCwxNiBMLTMsMyBMLTE2LDAgTC0zLC0zIFoiIGZpbGw9IndoaXRlIi8+CiAgPC9nPgo8L3N2Zz4K";
const LOGO_FAVICON = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjN0M2QkYwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzUyNDFDQyIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iciIgeDE9IjAiIHkxPSIwIiB4Mj0iMSIgeTI9IjAiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRjREMDNGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjRkZFQUE3Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y0RDAzRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiByeD0iMTUiIGZpbGw9InVybCgjZykiLz4KICA8Y2lyY2xlIGN4PSIxOCIgY3k9IjE2IiByPSIyMCIgZmlsbD0iIzhCN0NGNyIgb3BhY2l0eT0iLjI1Ii8+CiAgPCEtLSBSYWlsIC0tPgogIDxyZWN0IHg9IjEzIiB5PSIxNiIgd2lkdGg9IjM4IiBoZWlnaHQ9IjIiIHJ4PSIxIiBmaWxsPSJ1cmwoI3IpIi8+CiAgPGNpcmNsZSBjeD0iMTMiIGN5PSIxNyIgcj0iMi41IiBmaWxsPSIjRjREMDNGIi8+CiAgPGNpcmNsZSBjeD0iNTEiIGN5PSIxNyIgcj0iMi41IiBmaWxsPSIjRjREMDNGIi8+CiAgPCEtLSBMZWZ0IC0tPgogIDxwYXRoIGQ9Ik0xNSAxOCBDMTQgMjYsMTMgMzQsMTUgNDIgQzE2IDQ2LDE1IDQ5LDE2IDUyIEwyOCA1MiBDMjkgNDksMjggNDIsMjkgMzQgQzMwIDI2LDI5IDIyLDMwIDE4IFoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9Ii44OCIvPgogIDxwYXRoIGQ9Ik0yMiAyMCBDMjEuNSAzMCwyMSA0MCwyMi41IDUwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9Ii40IiBmaWxsPSJub25lIi8+CiAgPCEtLSBSaWdodCAtLT4KICA8cGF0aCBkPSJNMzQgMTggQzM1IDIyLDM0IDI2LDM1IDM0IEMzNiA0MiwzNSA0OSwzNiA1MiBMNDggNTIgQzQ5IDQ5LDQ4IDQ2LDQ5IDQyIEM1MSAzNCw1MCAyNiw0OSAxOCBaIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIuNyIvPgogIDxwYXRoIGQ9Ik00MiAyMCBDNDIuNSAzMCw0MyA0MCw0MS41IDUwIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEiIG9wYWNpdHk9Ii4zIiBmaWxsPSJub25lIi8+CiAgPCEtLSBTcGFya2xlIC0tPgogIDxwYXRoIGQ9Ik0zMiAzMCBMMzMgMzMgTDM2IDM0IEwzMyAzNSBMMzIgMzggTDMxIDM1IEwyOCAzNCBMMzEgMzMgWiIgZmlsbD0id2hpdGUiIG9wYWNpdHk9Ii42Ii8+Cjwvc3ZnPgo=";
const LOGO_HORIZ = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMTAwIiBmaWxsPSJub25lIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYmciIHgxPSIwIiB5MT0iMCIgeDI9IjEiIHkyPSIxIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzZDNUNFNyIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM0ODM0RDQiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InJvZCIgeDE9IjAiIHkxPSIwIiB4Mj0iMSIgeTI9IjAiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRkZENzAwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iNTAlIiBzdG9wLWNvbG9yPSIjRkZGNENDIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0ZGRDcwMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgCiAgPCEtLSBJY29uIHNxdWFyZSAtLT4KICA8cmVjdCB4PSI4IiB5PSI4IiB3aWR0aD0iODQiIGhlaWdodD0iODQiIHJ4PSIyMCIgZmlsbD0idXJsKCNiZykiLz4KICA8cmVjdCB4PSIyMiIgeT0iMjYiIHdpZHRoPSI1NiIgaGVpZ2h0PSIzIiByeD0iMS41IiBmaWxsPSJ1cmwoI3JvZCkiLz4KICA8Y2lyY2xlIGN4PSIyMiIgY3k9IjI3LjUiIHI9IjMuNSIgZmlsbD0iI0ZGRDcwMCIvPgogIDxjaXJjbGUgY3g9Ijc4IiBjeT0iMjcuNSIgcj0iMy41IiBmaWxsPSIjRkZENzAwIi8+CiAgPHBhdGggZD0iTTI1IDI5IEMyNSAyOSwyMyA0OCwyNyA2NCBDMjggNjgsMjYgNzIsMjcgNzUgTDQyIDc1IEM0NCA2MCw0MiA0NSw0NSAyOSBaIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIwLjkiLz4KICA8cGF0aCBkPSJNNTUgMjkgQzU4IDQ1LDU2IDYwLDU4IDc1IEw3MyA3NSBDNzQgNzIsNzIgNjgsNzMgNjQgQzc3IDQ4LDc1IDI5LDc1IDI5IFoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNzgiLz4KICA8cmVjdCB4PSI0NCIgeT0iMzMiIHdpZHRoPSIxMiIgaGVpZ2h0PSIyMCIgcng9IjEuNSIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC4xNSIvPgogIAogIDwhLS0gVGV4dCAtLT4KICA8dGV4dCB4PSIxMTAiIHk9IjQ4IiBmb250LWZhbWlseT0ic3lzdGVtLXVpLC1hcHBsZS1zeXN0ZW0sc2Fucy1zZXJpZiIgZm9udC1zaXplPSIzMCIgZm9udC13ZWlnaHQ9IjgwMCIgZmlsbD0iIzFBMUQyRSIgbGV0dGVyLXNwYWNpbmc9Ii0wLjUiPkN1cnRhaW48L3RleHQ+CiAgPHRleHQgeD0iMjUzIiB5PSI0OCIgZm9udC1mYW1pbHk9InN5c3RlbS11aSwtYXBwbGUtc3lzdGVtLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMzAiIGZvbnQtd2VpZ2h0PSI4MDAiIGZpbGw9IiM2QzVDRTciIGxldHRlci1zcGFjaW5nPSItMC41Ij5BY2FkZW15PC90ZXh0PgogIDx0ZXh0IHg9IjExMCIgeT0iNzIiIGZvbnQtZmFtaWx5PSJzeXN0ZW0tdWksLWFwcGxlLXN5c3RlbSxzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iNTAwIiBmaWxsPSIjOTQ5OEFDIiBsZXR0ZXItc3BhY2luZz0iMC41Ij5TYWxlcyBUcmFpbmluZyBQbGF0Zm9ybTwvdGV4dD4KPC9zdmc+Cg==";

// === Cloud Persistent Storage ===
// Uses window.storage API for cloud-based persistence
// shared=true means ALL users see the same data (courses, users)
// shared=false means per-user data (progress, scores)


// Convert sharing URLs to direct/embeddable image URLs
function toDirectImageUrl(url) {
  if (!url) return url;
  // Google Drive: https://drive.google.com/file/d/FILE_ID/view?...
  let m = url.match(/drive\.google\.com\/file\/d\/([^\/\?]+)/);
  if (m) return 'https://lh3.googleusercontent.com/d/' + m[1];
  // Google Drive open: https://drive.google.com/open?id=FILE_ID
  m = url.match(/drive\.google\.com\/open\?id=([^&\s]+)/);
  if (m) return 'https://lh3.googleusercontent.com/d/' + m[1];
  // Google Drive uc: already direct
  if (url.includes('drive.google.com/uc')) return url;
  // Dropbox: change dl=0 to dl=1
  if (url.includes('dropbox.com')) return url.replace('dl=0','dl=1').replace('www.dropbox.com','dl.dropboxusercontent.com');
  return url;
}

// === Cloud Storage with Firebase Realtime Database ===
// Admin can set Firebase URL in Settings to enable cross-device sync
// Without Firebase: uses localStorage (per-device only)
const HAS_CLOUD = typeof window !== 'undefined' && window.storage && typeof window.storage.get === 'function';

const FB_DEFAULT = 'https://curtain-academy-default-rtdb.asia-southeast1.firebasedatabase.app';

function getFbUrl() {
  try { return localStorage.getItem('ca_firebase_url') || FB_DEFAULT; } catch(e) { return FB_DEFAULT; }
}
function setFbUrl(url) {
  try { localStorage.setItem('ca_firebase_url', url); } catch(e) {}
}

async function cloudGet(key, fallback, shared) {
  // 1. Try Firebase
  const fb = getFbUrl();
  if (fb) {
    try {
      const path = shared ? 'shared' : 'personal';
      const resp = await fetch(fb + '/' + path + '/' + key + '.json', {signal: AbortSignal.timeout(5000)});
      if (resp.ok) { const data = await resp.json(); if (data !== null && data !== undefined) return data; }
    } catch(e) { console.log('Firebase GET fail:', key, e.message); }
  }
  // 2. Try window.storage (Claude.ai)
  if (HAS_CLOUD) {
    try {
      const r = await window.storage.get(key, shared);
      if (r && r.value) return JSON.parse(r.value);
    } catch(e) {}
  }
  // 3. Try localStorage
  try {
    const v = localStorage.getItem('ca_' + key);
    if (v) return JSON.parse(v);
  } catch(e) {}
  return fallback;
}

async function cloudSet(key, val, shared) {
  const results = {fb:false, ls:false};
  // 1. Save to Firebase
  const fb = getFbUrl();
  if (fb) {
    try {
      const resp = await fetch(fb + '/' + (shared?'shared':'personal') + '/' + key + '.json', {
        method: 'PUT', headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(val), signal: AbortSignal.timeout(5000)
      });
      if(resp.ok) results.fb = true;
    } catch(e) { console.log('Firebase SET fail:', key, e.message); }
  }
  // 2. Save to window.storage
  if (HAS_CLOUD) { try { await window.storage.set(key, JSON.stringify(val), shared); } catch(e) {} }
  // 3. Save to localStorage
  try { localStorage.setItem('ca_' + key, JSON.stringify(val)); results.ls = true; } catch(e) {}
  return results;
}

// Force push ALL data to Firebase
async function forcePushToFirebase(courses, users, resources, scripts) {
  const fb = getFbUrl();
  if (!fb) return {ok:false, msg:'‡πÑ‡∏°‡πà‡∏°‡∏µ Firebase URL'};
  const errors = [];
  const items = [
    ['shared/courses', courses], ['shared/users', users],
    ['shared/resources', resources], ['shared/scripts', scripts]
  ];
  for (const [path, data] of items) {
    try {
      const r = await fetch(fb + '/' + path + '.json', {
        method: 'PUT', headers: {'Content-Type':'application/json'},
        body: JSON.stringify(data), signal: AbortSignal.timeout(8000)
      });
      if (!r.ok) errors.push(path + ': ' + r.status);
    } catch(e) { errors.push(path + ': ' + e.message); }
  }
  if (errors.length === 0) return {ok:true, msg:'‚úÖ Push ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏∂‡πâ‡∏ô Firebase ‡πÅ‡∏•‡πâ‡∏ß'};
  return {ok:false, msg:'‚ùå Error: ' + errors.join(', ')};
}


function lsGet(key, fallback) { return fallback; }
function lsSet(key, val) {}

function App() {
  const [user, setUser] = useState(() => {
    try { const s = localStorage.getItem('ca_session'); return s ? JSON.parse(s) : null; } catch(e) { return null; }
  });
  const [page, setPage] = useState("dashboard");
  const [selLvl, setSelLvl] = useState(null);
  const [selLes, setSelLes] = useState(null);
  const [qz, setQz] = useState(false);
  const [prog, setProg] = useState({});
  const [scores, setScores] = useState({});
  const [courses, setCourses] = useState(LEVELS_DATA);
  const [users, setUsers] = useState(USERS_DATA);
  const [resources, setResources] = useState(RES_DEFAULT);
  const [scripts, setScripts] = useState(SCRIPTS_DATA);
  const [loaded, setLoaded] = useState(false);
  const [saving, setSaving] = useState(false);

  // Persist user session
  useEffect(() => {
    if (user) localStorage.setItem('ca_session', JSON.stringify(user));
    else localStorage.removeItem('ca_session');
  }, [user]);

  useEffect(() => { const s=document.createElement("style"); s.textContent=CSS; document.head.appendChild(s); return ()=>document.head.removeChild(s); }, []);
  useEffect(() => { let l=document.querySelector("link[rel='icon']"); if(!l){l=document.createElement('link');l.rel='icon';document.head.appendChild(l)} l.href=LOGO_FAVICON; }, []);

  // Load from cloud on mount
  useEffect(() => {
    let cancelled = false;
    async function load() {
      try {
        const [c, u, p, s, r, sc] = await Promise.all([
          cloudGet('courses', null, true),
          cloudGet('users', null, true),
          cloudGet('prog', null, false),
          cloudGet('scores', null, false),
          cloudGet('resources', null, true),
          cloudGet('scripts', null, true),
        ]);
        if (cancelled) return;
        if (c) setCourses(c);
        if (u) setUsers(u);
        if (p) setProg(p);
        if (s) setScores(s);
        if (r) setResources(r);
        if (sc) setScripts(sc);
      } catch(e) { console.log('load error', e); }
      if (!cancelled) setLoaded(true);
    }
    load();
    return () => { cancelled = true; };
  }, []);

  // Auto-save to cloud (debounced, skip initial load)
  const skipPoll = React.useRef(false);
  useEffect(() => {
    if (!loaded) return;
    skipPoll.current = true;
    const t = setTimeout(() => { cloudSet('courses', courses, true).then(()=>{setTimeout(()=>{skipPoll.current=false},2000)}); }, 500);
    return () => clearTimeout(t);
  }, [courses, loaded]);
  useEffect(() => {
    if (!loaded) return;
    skipPoll.current = true;
    const t = setTimeout(() => { cloudSet('users', users, true).then(()=>{setTimeout(()=>{skipPoll.current=false},2000)}); }, 500);
    return () => clearTimeout(t);
  }, [users, loaded]);
  useEffect(() => {
    if (!loaded) return;
    const t = setTimeout(() => { cloudSet('prog', prog, false); }, 500);
    return () => clearTimeout(t);
  }, [prog, loaded]);
  useEffect(() => {
    if (!loaded) return;
    const t = setTimeout(() => { cloudSet('scores', scores, false); }, 500);
    return () => clearTimeout(t);
  }, [scores, loaded]);
  useEffect(() => {
    if (!loaded) return;
    skipPoll.current = true;
    const t = setTimeout(() => { cloudSet('resources', resources, true).then(()=>{setTimeout(()=>{skipPoll.current=false},2000)}); }, 500);
    return () => clearTimeout(t);
  }, [resources, loaded]);
  useEffect(() => {
    if (!loaded) return;
    skipPoll.current = true;
    const t = setTimeout(() => { cloudSet('scripts', scripts, true).then(()=>{setTimeout(()=>{skipPoll.current=false},2000)}); }, 500);
    return () => clearTimeout(t);
  }, [scripts, loaded]);

  // Poll Firebase every 10 seconds for real-time sync
  useEffect(() => {
    if (!loaded) return;
    const fb = getFbUrl();
    if (!fb) return;
    const poll = async () => {
      if (skipPoll.current) return;
      try {
        const resp = await fetch(fb + '/shared.json', {signal: AbortSignal.timeout(5000)});
        if (!resp.ok) return;
        const d = await resp.json();
        if (!d) return;
        if (d.courses && JSON.stringify(d.courses) !== JSON.stringify(courses)) setCourses(d.courses);
        if (d.users && JSON.stringify(d.users) !== JSON.stringify(users)) setUsers(d.users);
        if (d.resources && JSON.stringify(d.resources) !== JSON.stringify(resources)) setResources(d.resources);
        if (d.scripts && JSON.stringify(d.scripts) !== JSON.stringify(scripts)) setScripts(d.scripts);
      } catch(e) {}
    };
    const iv = setInterval(poll, 10000);
    return () => clearInterval(iv);
  }, [loaded, courses, users, resources, scripts]);

  const lp = useCallback((lv) => { if(!lv.lessons||!lv.lessons.length) return 0; const d=lv.lessons.filter(l=>prog[l.id]).length; return Math.round(d/lv.lessons.length*100); }, [prog]);
  const isUn = useCallback((lv) => { if(lv.id===1) return true; const p=courses.find(l=>l.id===lv.id-1); return p && lp(p)===100 && (scores[p.id]||0)>=70; }, [lp, scores, courses]);
  const uLvl = useCallback(() => { let h=0; for(const l of courses){ if(lp(l)===100 && (scores[l.id]||0)>=70) h=l.id; } return h; }, [lp, scores, courses]);
  const tScore = useMemo(() => { const v=Object.values(scores); return v.length ? Math.round(v.reduce((a,b)=>a+b,0)/v.length) : 0; }, [scores]);

  if (!loaded) return <div className="app" style={{display:'flex',alignItems:'center',justifyContent:'center',minHeight:'100vh',flexDirection:'column',gap:16}}>
    <img src={LOGO_ICON} alt="Logo" style={{width:72,height:72,borderRadius:16}}/>
    <div style={{fontFamily:'Outfit',fontSize:22,fontWeight:700}}>Curtain<span style={{color:'var(--ac)'}}>Academy</span></div>
    <div style={{color:'var(--tx2)',fontSize:14}}>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
    <div style={{width:120,height:4,background:'var(--sf2)',borderRadius:2,overflow:'hidden'}}><div style={{width:'60%',height:'100%',background:'var(--ac)',borderRadius:2,animation:'loading 1.5s infinite'}}></div></div>
  </div>;

  if (!user) return <Login onLogin={setUser}/>;

  const nav = [{id:'dashboard',ic:'üìä',lb:'Dashboard'},{id:'courses',ic:'üìö',lb:'‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£'},{dv:true},{id:'calculator',ic:'üßÆ',lb:'‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤'},{id:'scripts',ic:'üí¨',lb:'Script Library'},{id:'resources',ic:'üìÅ',lb:'Resources'}];
  const goP = (p) => { setPage(p); setSelLvl(null); setSelLes(null); setQz(false); };

  return (
    <div className="app"><div className="layout">
      <aside className="sb">
        <div className="sb-logo" style={{display:'flex',alignItems:'center',gap:10}}><img src={LOGO_ICON} alt="Logo" style={{width:36,height:36,borderRadius:8}}/><span>Curtain<span>Academy</span></span></div>
        <nav className="sb-nav">{nav.map((n,i) => n.dv ? <div key={i} className="ndv"/> : <div key={n.id} className={`ni ${page===n.id?'on':''}`} onClick={()=>goP(n.id)}><span className="ic">{n.ic}</span>{n.lb}</div>)}</nav>
        <div className="su"><span className="av">{user.avatar}</span><div style={{flex:1}}><div className="nm">{user.name}</div><span className="rb" style={{background:rbg(user.role),color:rcl(user.role)}}>{user.role}</span></div><button className="lob" onClick={()=>{setUser(null);localStorage.removeItem('ca_session');setPage('dashboard')}}>‚èª</button></div>
      </aside>
      <div className="mn">
        <header className="mh"><h1 className="mt">{({dashboard:'Dashboard',courses:'‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£',calculator:'‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤',scripts:'Script Library',resources:'Resources'})[page]}</h1>{user.role!=='admin'&&<span className="badge b-pu">Level {uLvl()}</span>}</header>
        <div className="mc">
          {page==='dashboard'&&user.role!=='admin'&&user.role!=='manager'&&<TDB prog={prog} scores={scores} lp={lp} uLvl={uLvl} tScore={tScore} courses={courses} onGo={l=>{setSelLvl(l);setPage('courses')}}/>}
          {page==='dashboard'&&user.role==='manager'&&<MDB/>}
          {page==='dashboard'&&user.role==='admin'&&<ADB courses={courses} setCourses={setCourses} users={users} setUsers={setUsers} resources={resources} setResources={setResources} scripts={scripts} setScripts={setScripts} setProg={setProg} setScores={setScores}/>}
          {page==='courses'&&!selLvl&&<CLvls lp={lp} isUn={isUn} scores={scores} onSel={setSelLvl} courses={courses}/>}
          {page==='courses'&&selLvl&&!selLes&&!qz&&<LD level={selLvl} prog={prog} qs={scores[selLvl.id]} onBack={()=>setSelLvl(null)} onLes={setSelLes} onQz={()=>setQz(true)}/>}
          {page==='courses'&&selLvl&&selLes&&<LV les={selLes} lvl={selLvl} prog={prog} onDn={()=>setProg(p=>({...p,[selLes.id]:true}))} onBack={()=>setSelLes(null)} onNx={()=>{const i=selLvl.lessons.findIndex(l=>l.id===selLes.id);setProg(p=>({...p,[selLes.id]:true}));i<selLvl.lessons.length-1?setSelLes(selLvl.lessons[i+1]):setSelLes(null)}}/>}
          {page==='courses'&&selLvl&&qz&&<QV level={selLvl} onFin={s=>{setScores(sc=>({...sc,[selLvl.id]:s}));setQz(false)}} onBack={()=>setQz(false)}/>}
          {page==='calculator'&&<Calc isM={user.role==='manager'||user.role==='admin'}/>}
          {page==='scripts'&&<Scr scripts={scripts} setScripts={setScripts} isAdmin={user.role==='admin'}/>}
          {page==='resources'&&<Res resources={resources} setResources={setResources} isAdmin={user.role==='admin'}/>}
        </div>
      </div>
    </div></div>
  );
}

function Login({onLogin}) {
  const [e,sE]=useState("");const [p,sP]=useState("");const [er,sEr]=useState("");const [demoUsers,sDU]=useState(USERS_DATA);
  useEffect(()=>{cloudGet('users',USERS_DATA,true).then(u=>{if(u)sDU(u)});},[]);
  const go=()=>{const u=demoUsers.find(u=>u.email===e&&u.pass===p);u?(onLogin(u),sEr("")):sEr("‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")};
  return <div className="app"><div className="lp"><div className="ll"><div className="lf">
    <div className="logo" style={{display:'flex',alignItems:'center',gap:12}}><img src={LOGO_ICON} alt="Logo" style={{width:44,height:44,borderRadius:10}}/>Curtain<span>Academy</span></div><div className="lsub">‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ö‡∏£‡∏°‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô ‚Äî ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</div>
    <div className="fg"><label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label><input value={e} onChange={x=>sE(x.target.value)} placeholder="email@demo.com" onKeyDown={x=>x.key==='Enter'&&go()}/></div>
    <div className="fg"><label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label><input type="password" value={p} onChange={x=>sP(x.target.value)} placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onKeyDown={x=>x.key==='Enter'&&go()}/></div>
    <button className="lbtn" onClick={go}>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>{er&&<div className="lerr">{er}</div>}
    <div className="da"><h4>üîë ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏î‡∏•‡∏≠‡∏á (‡∏Ñ‡∏•‡∏¥‡∏Å)</h4>{demoUsers.map(u=><div key={u.id} className="dr" onClick={()=>{sE(u.email);sP(u.pass)}}><span>{u.avatar} {u.name}</span><span>{u.email}</span></div>)}</div>
  </div></div><div className="lr"><div className="lh"><img src={LOGO_ICON} alt="Logo" style={{width:100,height:100,borderRadius:24,marginBottom:16,boxShadow:'0 8px 32px rgba(0,0,0,.3)'}}/><h2>Curtain Sales Academy</h2><p>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏à‡∏ô‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</p></div></div></div></div>;
}

function TDB({prog,lp,uLvl,tScore,onGo,courses}) {
  const cl=Object.keys(prog).length;const tl=courses.reduce((a,l)=>a+l.lessons.length,0);
  return <><div className="cg">
    <div className="card sc"><div className="si">üìä</div><div className="sv">{Math.round(cl/tl*100)}%</div><div className="sl">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</div></div>
    <div className="card sc"><div className="si">‚≠ê</div><div className="sv">{tScore}</div><div className="sl">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô Quiz</div></div>
    <div className="card sc"><div className="si">üèÜ</div><div className="sv">Lv.{uLvl()}</div><div className="sl">Level</div></div>
    <div className="card sc"><div className="si">üìö</div><div className="sv">{cl}/{tl}</div><div className="sl">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏à‡∏ö</div></div>
  </div>
  <h3 style={{fontSize:16,fontWeight:700,marginBottom:14}}>üìå ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
  {courses.slice(0,3).map(l=>{const p=lp(l);return <div key={l.id} className="lc" onClick={()=>onGo(l)}><div className="li" style={{background:l.color+'15'}}>{l.icon}</div><div className="linf"><h3>Level {l.id}: {l.title}</h3><p>{p>0?p+'%':'‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'}</p><div className="lpb"><div className="lpf" style={{width:p+'%',background:l.color}}/></div></div><button className="btn bp bs">{p>0?'‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡πà‡∏≠ ‚Üí':'‡πÄ‡∏£‡∏¥‡πà‡∏° ‚Üí'}</button></div>})}</>;
}

function MDB() {
  return <><div className="cg">
    <div className="card sc"><div className="si">üë•</div><div className="sv">3</div><div className="sl">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</div></div>
    <div className="card sc"><div className="si">üìä</div><div className="sv">65%</div><div className="sl">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div></div>
    <div className="card sc"><div className="si">üí∞</div><div className="sv">‡∏ø850K</div><div className="sl">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div></div>
  </div>
  <div className="card" style={{marginBottom:24}}><h3 style={{fontSize:16,fontWeight:700,marginBottom:16}}>üìã ‡∏ó‡∏µ‡∏°</h3>
    <table className="tt"><thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>Level</th><th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th><th>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th></tr></thead><tbody>
    <tr><td>üßë‚Äçüíº ‡∏™‡∏°‡∏ä‡∏≤‡∏¢</td><td>Lv.1</td><td>45</td><td>‡∏ø120K</td><td><span className="badge b-or">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span></td></tr>
    <tr><td>üë©‚Äçüíº ‡∏ß‡∏¥‡∏†‡∏≤</td><td>Lv.3</td><td>82</td><td>‡∏ø380K</td><td><span className="badge b-gn">‡∏ú‡πà‡∏≤‡∏ô L3</span></td></tr>
    <tr><td>üë®‚Äçüíº ‡∏õ‡∏¥‡∏¢‡∏∞</td><td>Lv.4</td><td>91</td><td>‡∏ø450K</td><td><span className="badge b-pu">Top Sales</span></td></tr>
    </tbody></table></div>
  <div className="card"><h3 style={{fontSize:16,fontWeight:700,marginBottom:16}}>üèÖ Ranking</h3>
    {[{n:"‡∏õ‡∏¥‡∏¢‡∏∞",s:"‡∏ø450K"},{n:"‡∏ß‡∏¥‡∏†‡∏≤",s:"‡∏ø380K"},{n:"‡∏™‡∏°‡∏ä‡∏≤‡∏¢",s:"‡∏ø120K"}].map((p,i)=><div key={i} style={{display:'flex',alignItems:'center',gap:14,padding:'12px 0',borderBottom:'1px solid var(--bd)'}}><span style={{fontSize:24,width:40,textAlign:'center'}}>{['ü•á','ü•à','ü•â'][i]}</span><span style={{flex:1,fontWeight:600}}>{p.n}</span><span style={{fontFamily:'Outfit',fontWeight:700,color:'var(--ac2)'}}>{p.s}</span></div>)}</div></>;
}

function ADB({courses,setCourses,users,setUsers,resources,setResources,scripts,setScripts,setProg,setScores}) {
  const [tab,sT]=useState("stats");
  const [modal,sM]=useState(null);
  const [fbUrl,sFbUrl]=useState(()=>getFbUrl());
  const [fbStatus,sFbStatus]=useState('');
  const testFb=async(url)=>{
    if(!url){sFbStatus('‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å URL');return}
    sFbStatus('‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...');
    try{
      const r=await fetch(url+'/.json',{signal:AbortSignal.timeout(5000)});
      if(r.ok){setFbUrl(url);sFbStatus('‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
      } else sFbStatus('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ (Status: '+r.status+') ‚Äî ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Rules ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô read/write: true');
    }catch(e){sFbStatus('‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ: '+e.message)}
  };
  const pushFb=async()=>{
    sFbStatus('‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á Push ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏∂‡πâ‡∏ô Firebase...');
    const result = await forcePushToFirebase(courses,users,resources,scripts);
    sFbStatus(result.msg);
  };
  const pullFb=async()=>{
    sFbStatus('‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firebase...');
    try{
      const fb=getFbUrl();
      const r=await fetch(fb+'/shared.json',{signal:AbortSignal.timeout(5000)});
      if(!r.ok){sFbStatus('‚ùå ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ');return}
      const d=await r.json();
      if(!d){sFbStatus('‚ö†Ô∏è Firebase ‡∏ß‡πà‡∏≤‡∏á ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Äî ‡πÉ‡∏´‡πâ Admin ‡∏Å‡∏î Push ‡∏Å‡πà‡∏≠‡∏ô');return}
      if(d.courses)setCourses(d.courses);
      if(d.users)setUsers(d.users);
      if(d.resources)setResources(d.resources);
      if(d.scripts)setScripts(d.scripts);
      sFbStatus('‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Firebase ‡πÅ‡∏•‡πâ‡∏ß');
    }catch(e){sFbStatus('‚ùå '+e.message)}
  };
  const [toast,sToast]=useState(null);

  const showToast=(msg)=>{sToast(msg);setTimeout(()=>sToast(null),2500)};
  const totalLessons=courses.reduce((a,c)=>a+c.lessons.length,0);
  const totalQuiz=courses.reduce((a,c)=>a+c.quiz.length,0);

  // Course CRUD
  const saveCourse=(form)=>{
    if(modal.type==='addCourse'){
      const newId=Math.max(...courses.map(c=>c.id),0)+1;
      const nc={id:newId,title:form.title,subtitle:form.subtitle,icon:form.icon||'üìò',color:form.color||'#6C5CE7',lessons:form.lessons||[],quiz:form.quiz||[]};
      setCourses([...courses,nc]);
      showToast('‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
    } else {
      setCourses(courses.map(c=>c.id===modal.data.id?{...c,title:form.title,subtitle:form.subtitle,icon:form.icon,color:form.color,lessons:form.lessons||c.lessons,quiz:form.quiz||c.quiz}:c));
      showToast('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
    }
    sM(null);
  };
  const deleteCourse=(id)=>{if(confirm('‡∏•‡∏ö‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ?')){setCourses(courses.filter(c=>c.id!==id));sM(null);showToast('üóëÔ∏è ‡∏•‡∏ö‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÅ‡∏•‡πâ‡∏ß')}};

  // User CRUD
  const saveUser=(form)=>{
    if(modal.type==='addUser'){
      const newId=Math.max(...users.map(u=>u.id),0)+1;
      const av={trainee:'üßë‚Äçüíº',sales:'üë©‚Äçüíº',manager:'üë®‚Äçüíª',admin:'‚öôÔ∏è'}[form.role]||'üë§';
      const nu={id:newId,name:form.name,email:form.email,pass:form.pass||'1234',role:form.role,team:form.team||'‡∏ó‡∏µ‡∏° A',avatar:av};
      setUsers([...users,nu]);
      showToast('‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
    } else {
      setUsers(users.map(u=>u.id===modal.data.id?{...u,name:form.name,email:form.email,role:form.role,team:form.team}:u));
      showToast('‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
    }
    sM(null);
  };
  const deleteUser=(id)=>{if(confirm('‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ?')){setUsers(users.filter(u=>u.id!==id));sM(null);showToast('üóëÔ∏è ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß')}};

  return <>
    <div className="tr">
      <button className={`tb ${tab==='stats'?'on':''}`} onClick={()=>sT('stats')}>üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</button>
      <button className={`tb ${tab==='courses'?'on':''}`} onClick={()=>sT('courses')}>üìö ‡∏Ñ‡∏≠‡∏£‡πå‡∏™</button>
      <button className={`tb ${tab==='users'?'on':''}`} onClick={()=>sT('users')}>üë• ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</button>
      <button className={`tb ${tab==='settings'?'on':''}`} onClick={()=>sT('settings')}>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
    </div>

    {tab==='stats'&&<>
      <div className="asr">
        <div className="as"><div className="v" style={{color:'var(--ac2)'}}>{users.length}</div><div className="l">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</div></div>
        <div className="as"><div className="v" style={{color:'var(--gn)'}}>{courses.length}</div><div className="l">‡∏Ñ‡∏≠‡∏£‡πå‡∏™</div></div>
        <div className="as"><div className="v" style={{color:'var(--or)'}}>{totalLessons}</div><div className="l">‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div></div>
        <div className="as"><div className="v" style={{color:'var(--pk)'}}>{totalQuiz}</div><div className="l">Quiz</div></div>
      </div>
      <div className="card"><h3 style={{fontSize:16,fontWeight:700,marginBottom:16}}>üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (7 ‡∏ß‡∏±‡∏ô)</h3>
        <div style={{display:'flex',alignItems:'flex-end',gap:8,height:120}}>
          {[40,65,55,80,70,90,45].map((v,i)=><div key={i} style={{flex:1,display:'flex',flexDirection:'column',alignItems:'center',gap:4}}>
            <span style={{fontSize:11,color:'var(--tx3)'}}>{v}%</span>
            <div style={{width:'100%',height:v+'%',background:'linear-gradient(to top,var(--ac),var(--ac2))',borderRadius:4,minHeight:4}}/>
            <span style={{fontSize:10,color:'var(--tx3)'}}>{['‡∏à','‡∏≠','‡∏û','‡∏û‡∏§','‡∏®','‡∏™','‡∏≠‡∏≤'][i]}</span>
          </div>)}
        </div>
      </div>
    </>}

    {tab==='courses'&&<div className="card">
      <div style={{display:'flex',justifyContent:'space-between',marginBottom:20}}>
        <h3 style={{fontSize:16,fontWeight:700}}>üìö ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({courses.length})</h3>
        <button className="btn bp bs" onClick={()=>sM({type:'addCourse'})}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏£‡πå‡∏™</button>
      </div>
      {courses.map(l=><div key={l.id} style={{display:'flex',alignItems:'center',gap:14,padding:'14px 0',borderBottom:'1px solid var(--bd)'}}>
        <span style={{fontSize:28}}>{l.icon}</span>
        <div style={{flex:1}}>
          <div style={{fontWeight:600}}>Level {l.id}: {l.title}</div>
          <div style={{fontSize:12,color:'var(--tx3)'}}>{l.lessons.length} ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ¬∑ {l.quiz.length} Quiz</div>
        </div>
        <button className="btn bg bs" onClick={()=>sM({type:'editCourse',data:l})}>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
      </div>)}
      {courses.length===0&&<div style={{textAlign:'center',padding:40,color:'var(--tx3)'}}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≠‡∏£‡πå‡∏™ ‡∏Å‡∏î + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏£‡πå‡∏™</div>}
    </div>}

    {tab==='users'&&<div className="card">
      <div style={{display:'flex',justifyContent:'space-between',marginBottom:20}}>
        <h3 style={{fontSize:16,fontWeight:700}}>üë• ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ({users.length})</h3>
        <button className="btn bp bs" onClick={()=>sM({type:'addUser'})}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</button>
      </div>
      <table className="tt"><thead><tr><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th><th>‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</th><th>‡∏ó‡∏µ‡∏°</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th></tr></thead>
      <tbody>{users.map(u=><tr key={u.id}>
        <td>{u.avatar} {u.name}</td>
        <td style={{color:'var(--tx3)'}}>{u.email}</td>
        <td><span className="badge" style={{background:rbg(u.role),color:rcl(u.role)}}>{u.role}</span></td>
        <td>{u.team}</td>
        <td><button className="btn bg bs" onClick={()=>sM({type:'editUser',data:u})}>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button></td>
      </tr>)}</tbody></table>
    </div>}

    {tab==='settings'&&<div className="card">
      <h3 style={{fontSize:16,fontWeight:700,marginBottom:16}}>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h3>

      <div style={{padding:16,border:'2px solid var(--ac)',borderRadius:8,background:'var(--acbg)',marginBottom:14}}>
        <div style={{fontSize:14,fontWeight:700,marginBottom:8,color:'var(--ac)'}}>üîó Firebase ‚Äî ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</div>
        <div style={{fontSize:12,color:'var(--tx2)',marginBottom:10,lineHeight:1.7}}>
          ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• sync ‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ö real-time<br/>
          {getFbUrl()?<span style={{color:'var(--gn)',fontWeight:600}}>‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß: {getFbUrl().slice(0,50)}...</span>:<span style={{color:'var(--or)',fontWeight:600}}>‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ‚Äî ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</span>}
        </div>
        <div style={{fontSize:12,color:'var(--tx2)',marginBottom:10,lineHeight:1.8,background:'var(--sf)',padding:12,borderRadius:6,border:'1px solid var(--bd)'}}>
          <b>‡∏ß‡∏¥‡∏ò‡∏µ setup Firebase (‡∏ü‡∏£‡∏µ):</b><br/>
          1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà <b>console.firebase.google.com</b> ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‡πÉ‡∏´‡∏°‡πà<br/>
          2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>Realtime Database</b> ‚Üí Create Database ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Region ‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î<br/>
          3. ‡∏ï‡∏±‡πâ‡∏á <b>Rules</b> ‡πÄ‡∏õ‡πá‡∏ô: {`{"rules":{".read":true,".write":true}}`}<br/>
          4. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL ‡πÄ‡∏ä‡πà‡∏ô <b>https://your-project-default-rtdb.firebaseio.com</b><br/>
          5. ‡∏ß‡∏≤‡∏á URL ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î ‡∏ó‡∏î‡∏™‡∏≠‡∏ö
        </div>
        <div style={{display:'flex',gap:8,marginBottom:6}}>
          <input value={fbUrl} onChange={e=>sFbUrl(e.target.value)} placeholder="https://your-project-default-rtdb.firebaseio.com" style={{flex:1,padding:'10px 12px',background:'var(--sf)',border:'1px solid var(--bd)',borderRadius:6,color:'var(--tx)',fontFamily:'var(--f)',fontSize:13}}/>
          <button className="btn bp bs" onClick={()=>testFb(fbUrl)}>üîó ‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
          {getFbUrl()&&<button className="btn bg bs" onClick={()=>{setFbUrl('');sFbUrl('');sFbStatus('üîå ‡∏ï‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß')}}>‚úï</button>}
        </div>
        {fbStatus&&<div style={{fontSize:12,marginTop:6,color:fbStatus.startsWith('‚úÖ')?'var(--gn)':fbStatus.startsWith('‚è≥')?'var(--bl)':'var(--rd)',fontWeight:600}}>{fbStatus}</div>}
      </div>

      <div style={{padding:16,background:'var(--sf2)',borderRadius:8,marginBottom:14}}>
        <div style={{fontSize:14,fontWeight:600,marginBottom:4}}>‚òÅÔ∏è ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
        <div style={{fontSize:13,color:'var(--tx2)'}}>
          {getFbUrl()?'‚úÖ Firebase ‚Äî ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞ sync ‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏Ñ‡∏≠‡∏£‡πå‡∏™, ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, Script, Resources = ‡∏Å‡∏•‡∏≤‡∏á / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ = ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß)':'‚ö†Ô∏è localStorage ‚Äî ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Firebase ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô'}
        </div>
      </div>

      <div style={{padding:16,border:'1px solid var(--rd)',borderRadius:8,background:'var(--rdbg)'}}>
        <div style={{fontSize:14,fontWeight:600,marginBottom:4,color:'var(--rd)'}}>üóëÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
        <div style={{fontSize:13,color:'var(--tx2)',marginBottom:12}}>‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏£‡πå‡∏™ ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Quiz ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡∏´‡∏°‡∏î)</div>
        <button className="btn btn-danger bs" type="button" onClick={()=>{if(confirm('‚ö†Ô∏è ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?\n‡∏Ñ‡∏≠‡∏£‡πå‡∏™ ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Quiz ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô')){Promise.all([cloudSet('courses',LEVELS_DATA,true),cloudSet('users',USERS_DATA,true),cloudSet('prog',{},false),cloudSet('scores',{},false),cloudSet('resources',RES_DEFAULT,true),cloudSet('scripts',SCRIPTS_DATA,true)]).then(()=>{setCourses(LEVELS_DATA);setUsers(USERS_DATA);setResources(RES_DEFAULT);setScripts(SCRIPTS_DATA);setProg({});setScores({});showToast('‚úÖ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢')})}}}>üóëÔ∏è ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      </div>
      <div style={{padding:16,border:'1px solid var(--bl)',borderRadius:8,background:'var(--blbg)',marginTop:14}}>
        <div style={{fontSize:14,fontWeight:600,marginBottom:4,color:'var(--bl)'}}>üì§ Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
        <div style={{fontSize:13,color:'var(--tx2)',marginBottom:12}}>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå JSON ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
        <button className="btn bg bs" type="button" onClick={()=>{const d=JSON.stringify({courses,users,resources,scripts},null,2);const b=new Blob([d],{type:'application/json'});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download='curtain-academy-backup.json';a.click();URL.revokeObjectURL(u);showToast('‚úÖ Export ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à')}}>üì§ Export JSON</button>
      </div>
      <div style={{padding:16,border:'1px solid var(--gn)',borderRadius:8,background:'var(--gnbg)',marginTop:14}}>
        <div style={{fontSize:14,fontWeight:600,marginBottom:4,color:'var(--gn)'}}>üì• Import ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
        <div style={{fontSize:13,color:'var(--tx2)',marginBottom:12}}>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON ‡∏ó‡∏µ‡πà Export ‡πÑ‡∏ß‡πâ</div>
        <input type="file" accept=".json" style={{fontSize:13}} onChange={e=>{const f=e.target.files[0];if(!f)return;const r=new FileReader();r.onload=ev=>{try{const d=JSON.parse(ev.target.result);if(d.courses){setCourses(d.courses);showToast('‚úÖ Import ‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ('+d.courses.length+' ‡∏Ñ‡∏≠‡∏£‡πå‡∏™)')}if(d.users){setUsers(d.users)}if(d.resources){setResources(d.resources)}if(d.scripts){setScripts(d.scripts)}}catch(err){alert('‡πÑ‡∏ü‡∏•‡πå JSON ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á')}};r.readAsText(f)}}/>
      </div>
    </div>}

    {/* MODALS */}
    {modal&&(modal.type==='addCourse'||modal.type==='editCourse')&&<CourseModal data={modal.type==='editCourse'?modal.data:null} onSave={saveCourse} onDelete={modal.type==='editCourse'?()=>deleteCourse(modal.data.id):null} onClose={()=>sM(null)}/>}
    {modal&&(modal.type==='addUser'||modal.type==='editUser')&&<UserModal data={modal.type==='editUser'?modal.data:null} onSave={saveUser} onDelete={modal.type==='editUser'?()=>deleteUser(modal.data.id):null} onClose={()=>sM(null)}/>}

    {toast&&<div className="toast">{toast}</div>}
  </>;
}

function CourseModal({data,onSave,onDelete,onClose}) {
  const [tab,sTab]=useState('info');
  const [title,sTitle]=useState(data?.title||'');
  const [subtitle,sSub]=useState(data?.subtitle||'');
  const [icon,sIcon]=useState(data?.icon||'üìò');
  const [color,sColor]=useState(data?.color||'#6C5CE7');
  const [lessons,sLessons]=useState(data?.lessons?JSON.parse(JSON.stringify(data.lessons)):[]);
  const [quiz,sQuiz]=useState(data?.quiz?JSON.parse(JSON.stringify(data.quiz)):[]);
  const [editLes,sEditLes]=useState(null);
  const [editQuiz,sEditQuiz]=useState(null);

  const icons=['üìò','üå±','üîç','üîß','üéØ','üöÄ','üíé','üìê','üé®','üí°','üèÜ','‚≠ê'];
  const colors=['#4CAF50','#2196F3','#FF9800','#9C27B0','#E91E63','#6C5CE7','#00BCD4','#FF5722'];

  // Lesson CRUD
  const addLesson=()=>{const id=Date.now().toString();sLessons([...lessons,{id,title:'‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà',blocks:[{type:'text',value:''}]}]);sEditLes(lessons.length)};
  const updateLesson=(i,field,val)=>{const n=[...lessons];n[i]={...n[i],[field]:val};sLessons(n)};
  const removeLesson=(i)=>{if(confirm('‡∏•‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏µ‡πâ?')){sLessons(lessons.filter((_,j)=>j!==i));if(editLes===i)sEditLes(null);else if(editLes>i)sEditLes(editLes-1)}};
  const moveLesson=(i,dir)=>{if(i+dir<0||i+dir>=lessons.length)return;const n=[...lessons];[n[i],n[i+dir]]=[n[i+dir],n[i]];sLessons(n);if(editLes===i)sEditLes(i+dir)};

  // Quiz CRUD
  const addQuiz=()=>{sQuiz([...quiz,{q:'‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà',opts:['‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å A','‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å B','‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å C','‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å D'],ans:0}]);sEditQuiz(quiz.length)};
  const updateQuiz=(i,field,val)=>{const n=[...quiz];n[i]={...n[i],[field]:val};sQuiz(n)};
  const updateQuizOpt=(qi,oi,val)=>{const n=[...quiz];n[qi]={...n[qi],opts:[...n[qi].opts]};n[qi].opts[oi]=val;sQuiz(n)};
  const removeQuiz=(i)=>{if(confirm('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ?')){sQuiz(quiz.filter((_,j)=>j!==i));if(editQuiz===i)sEditQuiz(null);else if(editQuiz>i)sEditQuiz(editQuiz-1)}};
  const addQuizOpt=(qi)=>{const n=[...quiz];n[qi]={...n[qi],opts:[...n[qi].opts,'‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà']};sQuiz(n)};
  const removeQuizOpt=(qi,oi)=>{if(quiz[qi].opts.length<=2)return alert('‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å');const n=[...quiz];n[qi]={...n[qi],opts:n[qi].opts.filter((_,j)=>j!==oi)};if(n[qi].ans>=n[qi].opts.length)n[qi].ans=0;sQuiz(n)};

  const handleSave=()=>{if(!title.trim())return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™');onSave({title,subtitle,icon,color,lessons,quiz})};

  return <div className="modal-overlay" onClick={onClose}><div className="modal" style={{maxWidth:720,maxHeight:'90vh'}} onClick={e=>e.stopPropagation()}>
    <h2 style={{marginBottom:16}}>{data?<>{icon} ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: {title||data.title}</>:'‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡πÉ‡∏´‡∏°‡πà'}</h2>

    <div className="tr" style={{marginBottom:20}}>
      <button className={`tb ${tab==='info'?'on':''}`} onClick={()=>{sTab('info');sEditLes(null);sEditQuiz(null)}}>üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</button>
      <button className={`tb ${tab==='lessons'?'on':''}`} onClick={()=>{sTab('lessons');sEditQuiz(null)}}>üìñ ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ({lessons.length})</button>
      <button className={`tb ${tab==='quiz'?'on':''}`} onClick={()=>{sTab('quiz');sEditLes(null)}}>üìù Quiz ({quiz.length})</button>
    </div>

    {/* INFO TAB */}
    {tab==='info'&&<>
      <div className="mfg"><label>‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏£‡πå‡∏™</label><input value={title} onChange={e=>sTitle(e.target.value)} placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô"/></div>
      <div className="mfg"><label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏¢‡πà‡∏≠</label><input value={subtitle} onChange={e=>sSub(e.target.value)} placeholder="‡πÄ‡∏ä‡πà‡∏ô Foundation"/></div>
      <div className="mfg"><label>‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô</label><div style={{display:'flex',gap:6,flexWrap:'wrap'}}>{icons.map(ic=><button key={ic} type="button" onClick={()=>sIcon(ic)} style={{fontSize:24,padding:'6px 10px',borderRadius:8,border:icon===ic?'2px solid var(--ac)':'2px solid var(--bd)',background:icon===ic?'var(--acbg)':'var(--sf2)',cursor:'pointer'}}>{ic}</button>)}</div></div>
      <div className="mfg"><label>‡∏™‡∏µ</label><div style={{display:'flex',gap:6}}>{colors.map(c=><button key={c} type="button" onClick={()=>sColor(c)} style={{width:32,height:32,borderRadius:8,background:c,border:color===c?'3px solid #fff':'3px solid transparent',cursor:'pointer',boxShadow:color===c?'0 0 0 2px var(--ac)':'none'}}/>)}</div></div>
    </>}

    {/* LESSONS TAB */}
    {tab==='lessons'&&<>
      <div style={{display:'flex',justifyContent:'space-between',marginBottom:14}}>
        <span style={{fontSize:13,color:'var(--tx2)'}}>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏ô‡∏µ‡πâ</span>
        <button className="btn bp bs" type="button" onClick={addLesson}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
      </div>
      {lessons.length===0&&<div style={{textAlign:'center',padding:30,color:'var(--tx3)',fontSize:14}}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏Å‡∏î + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>}
      {lessons.map((les,i)=><div key={les.id||i} style={{marginBottom:10}}>
        <div style={{display:'flex',alignItems:'center',gap:8,padding:'10px 14px',background:editLes===i?'var(--acbg)':'var(--sf2)',border:editLes===i?'1px solid var(--ac)':'1px solid var(--bd)',borderRadius:8,cursor:'pointer'}} onClick={()=>sEditLes(editLes===i?null:i)}>
          <span style={{fontSize:13,color:'var(--tx3)',width:24,textAlign:'center'}}>{i+1}</span>
          <span style={{flex:1,fontSize:14,fontWeight:600}}>{les.title}</span>
          <button type="button" onClick={e=>{e.stopPropagation();moveLesson(i,-1)}} style={{background:'none',border:'none',color:'var(--tx3)',cursor:'pointer',fontSize:14}} title="‡∏Ç‡∏∂‡πâ‡∏ô">‚ñ≤</button>
          <button type="button" onClick={e=>{e.stopPropagation();moveLesson(i,1)}} style={{background:'none',border:'none',color:'var(--tx3)',cursor:'pointer',fontSize:14}} title="‡∏•‡∏á">‚ñº</button>
          <button type="button" onClick={e=>{e.stopPropagation();removeLesson(i)}} style={{background:'none',border:'none',color:'var(--rd)',cursor:'pointer',fontSize:14}} title="‡∏•‡∏ö">‚úï</button>
        </div>
        {editLes===i&&<LessonBlockEditor les={les} onChange={(field,val)=>updateLesson(i,field,val)}/>}
      </div>)}
    </>}

    {/* QUIZ TAB */}
    {tab==='quiz'&&<>
      <div style={{display:'flex',justifyContent:'space-between',marginBottom:14}}>
        <span style={{fontSize:13,color:'var(--tx2)'}}>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ 70% ‡∏à‡∏∂‡∏á‡∏ú‡πà‡∏≤‡∏ô)</span>
        <button className="btn bp bs" type="button" onClick={addQuiz}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠</button>
      </div>
      {quiz.length===0&&<div style={{textAlign:'center',padding:30,color:'var(--tx3)',fontSize:14}}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Quiz ‡∏Å‡∏î + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠</div>}
      {quiz.map((q,qi)=><div key={qi} style={{marginBottom:10}}>
        <div style={{display:'flex',alignItems:'center',gap:8,padding:'10px 14px',background:editQuiz===qi?'var(--acbg)':'var(--sf2)',border:editQuiz===qi?'1px solid var(--ac)':'1px solid var(--bd)',borderRadius:8,cursor:'pointer'}} onClick={()=>sEditQuiz(editQuiz===qi?null:qi)}>
          <span style={{fontSize:13,color:'var(--tx3)',width:24}}>Q{qi+1}</span>
          <span style={{flex:1,fontSize:14,fontWeight:500}}>{q.q}</span>
          <span style={{fontSize:11,color:'var(--gn)',background:'var(--gnbg)',padding:'2px 8px',borderRadius:4}}>‡∏ï‡∏≠‡∏ö: {q.opts[q.ans]?.slice(0,15)}{q.opts[q.ans]?.length>15?'...':''}</span>
          <button type="button" onClick={e=>{e.stopPropagation();removeQuiz(qi)}} style={{background:'none',border:'none',color:'var(--rd)',cursor:'pointer',fontSize:14}} title="‡∏•‡∏ö">‚úï</button>
        </div>
        {editQuiz===qi&&<div style={{padding:16,background:'var(--sf2)',borderRadius:'0 0 8px 8px',border:'1px solid var(--bd)',borderTop:0}}>
          <div className="mfg"><label>‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</label><input value={q.q} onChange={e=>updateQuiz(qi,'q',e.target.value)} placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°"/></div>
          <div className="mfg"><label>‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡∏Ñ‡∏•‡∏¥‡∏Å ‚úì ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å)</label>
            {q.opts.map((opt,oi)=><div key={oi} style={{display:'flex',gap:6,marginBottom:6,alignItems:'center'}}>
              <button type="button" onClick={()=>updateQuiz(qi,'ans',oi)} style={{width:28,height:28,borderRadius:'50%',border:q.ans===oi?'2px solid var(--gn)':'2px solid var(--bd)',background:q.ans===oi?'var(--gn)':'transparent',color:q.ans===oi?'#fff':'var(--tx3)',cursor:'pointer',fontSize:12,flexShrink:0,display:'flex',alignItems:'center',justifyContent:'center'}}>{q.ans===oi?'‚úì':oi+1}</button>
              <input value={opt} onChange={e=>updateQuizOpt(qi,oi,e.target.value)} style={{flex:1,padding:'8px 12px',background:'var(--sf)',border:'1px solid var(--bd)',borderRadius:6,color:'var(--tx)',fontFamily:'var(--f)',fontSize:13}}/>
              <button type="button" onClick={()=>removeQuizOpt(qi,oi)} style={{background:'none',border:'none',color:'var(--rd)',cursor:'pointer',fontSize:12,opacity:q.opts.length<=2?.3:1}} title="‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å">‚úï</button>
            </div>)}
            <button type="button" onClick={()=>addQuizOpt(qi)} style={{fontSize:12,color:'var(--ac2)',background:'none',border:'1px dashed var(--bd)',borderRadius:6,padding:'6px 12px',cursor:'pointer',width:'100%',marginTop:4}}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</button>
          </div>
        </div>}
      </div>)}
    </>}

    <div className="modal-actions">
      {onDelete&&<button className="btn btn-danger bs" type="button" onClick={onDelete}>üóëÔ∏è ‡∏•‡∏ö‡∏Ñ‡∏≠‡∏£‡πå‡∏™</button>}
      <div style={{flex:1}}/>
      <button className="btn bg bs" type="button" onClick={onClose}>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button className="btn bp bs" type="button" onClick={handleSave}>üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>
  </div></div>;
}

function UserModal({data,onSave,onDelete,onClose}) {
  const [name,sName]=useState(data?.name||'');
  const [email,sEmail]=useState(data?.email||'');
  const [pass,sPass]=useState('');
  const [role,sRole]=useState(data?.role||'trainee');
  const [team,sTeam]=useState(data?.team||'‡∏ó‡∏µ‡∏° A');
  return <div className="modal-overlay" onClick={onClose}><div className="modal" onClick={e=>e.stopPropagation()}>
    <h2>{data?'‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ':'‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà'}</h2>
    <div className="mfr">
      <div className="mfg"><label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label><input value={name} onChange={e=>sName(e.target.value)} placeholder="‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"/></div>
      <div className="mfg"><label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label><input type="email" value={email} onChange={e=>sEmail(e.target.value)} placeholder="email@company.com"/></div>
    </div>
    <div className="mfr">
      <div className="mfg"><label>‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</label><select value={role} onChange={e=>sRole(e.target.value)}><option value="trainee">Trainee</option><option value="sales">Sales</option><option value="manager">Manager</option><option value="admin">Admin</option></select></div>
      <div className="mfg"><label>‡∏ó‡∏µ‡∏°</label><select value={team} onChange={e=>sTeam(e.target.value)}><option>‡∏ó‡∏µ‡∏° A</option><option>‡∏ó‡∏µ‡∏° B</option><option>‡∏ó‡∏µ‡∏° C</option></select></div>
    </div>
    {!data&&<div className="mfg"><label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label><input type="password" value={pass} onChange={e=>sPass(e.target.value)} placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 1234)"/></div>}
    <div className="modal-actions">
      {onDelete&&<button className="btn btn-danger bs" onClick={onDelete}>üóëÔ∏è ‡∏•‡∏ö</button>}
      <div style={{flex:1}}/>
      <button className="btn bg bs" onClick={onClose}>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button className="btn bp bs" onClick={()=>{if(!name.trim()||!email.trim())return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');onSave({name,email,pass:pass||'1234',role,team})}}>{data?'üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å':'‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°'}</button>
    </div>
  </div></div>;
}


function LessonBlockEditor({les,onChange}) {
  const blocks = les.blocks || (les.content ? [{type:'text',value:les.content}] : [{type:'text',value:''}]);
  const setBlocks=(nb)=>onChange('blocks',nb);

  const addBlock=(type,afterIdx)=>{
    const nb=[...blocks];
    const newBlock = type==='text'?{type:'text',value:''}:{type,url:'',caption:''};
    nb.splice(afterIdx+1,0,newBlock);
    setBlocks(nb);
  };
  const updateBlock=(bi,field,val)=>{const nb=[...blocks];nb[bi]={...nb[bi],[field]:val};setBlocks(nb)};
  const removeBlock=(bi)=>{if(blocks.length<=1&&blocks[0].type==='text')return;const nb=blocks.filter((_,j)=>j!==bi);setBlocks(nb.length?nb:[{type:'text',value:''}])};
  const moveBlock=(bi,dir)=>{if(bi+dir<0||bi+dir>=blocks.length)return;const nb=[...blocks];[nb[bi],nb[bi+dir]]=[nb[bi+dir],nb[bi]];setBlocks(nb)};

  return <div style={{padding:16,background:'var(--sf2)',borderRadius:'0 0 8px 8px',border:'1px solid var(--bd)',borderTop:0}}>
    <div className="mfg"><label>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label><input value={les.title} onChange={e=>onChange('title',e.target.value)}/></div>

    <div className="mfg"><label>üìù ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏£‡∏π‡∏õ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞)</label>
      {blocks.map((b,bi)=><div key={bi} style={{marginBottom:8}}>
        <div style={{display:'flex',alignItems:'center',gap:4,marginBottom:4}}>
          <span style={{fontSize:11,color:'var(--tx3)',width:50}}>{b.type==='text'?'üìù ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°':b.type==='image'?'üñºÔ∏è ‡∏£‡∏π‡∏õ':'‚ñ∂Ô∏è ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠'}</span>
          <div style={{flex:1}}/>
          <button type="button" onClick={()=>moveBlock(bi,-1)} style={{background:'none',border:'none',color:'var(--tx3)',cursor:'pointer',fontSize:11,padding:'2px 4px'}}>‚ñ≤</button>
          <button type="button" onClick={()=>moveBlock(bi,1)} style={{background:'none',border:'none',color:'var(--tx3)',cursor:'pointer',fontSize:11,padding:'2px 4px'}}>‚ñº</button>
          <button type="button" onClick={()=>removeBlock(bi)} style={{background:'none',border:'none',color:'var(--rd)',cursor:'pointer',fontSize:11,padding:'2px 4px'}}>‚úï</button>
        </div>

        {b.type==='text'&&<textarea value={b.value||''} onChange={e=>updateBlock(bi,'value',e.target.value)} style={{width:'100%',padding:'10px 12px',background:'var(--sf)',border:'1px solid var(--bd)',borderRadius:6,color:'var(--tx)',fontFamily:'var(--f)',fontSize:13,minHeight:80,resize:'vertical',lineHeight:1.7}} placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤..."/>}

        {b.type==='image'&&<div style={{border:'1px dashed var(--bd)',borderRadius:8,padding:10,background:'var(--sf)'}}>
          <input value={b.url||''} onChange={e=>updateBlock(bi,'url',e.target.value)} placeholder="‡∏ß‡∏≤‡∏á URL ‡∏£‡∏π‡∏õ ‡∏´‡∏£‡∏∑‡∏≠ Google Drive link" style={{width:'100%',padding:'8px 10px',background:'var(--sf2)',border:'1px solid var(--bd)',borderRadius:6,color:'var(--tx)',fontFamily:'var(--f)',fontSize:12,marginBottom:4}}/>
          <input value={b.caption||''} onChange={e=>updateBlock(bi,'caption',e.target.value)} placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏£‡∏π‡∏õ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)" style={{width:'100%',padding:'6px 10px',background:'var(--sf2)',border:'1px solid var(--bd)',borderRadius:6,color:'var(--tx)',fontFamily:'var(--f)',fontSize:11}}/>
          {b.url&&<div style={{marginTop:6,borderRadius:4,overflow:'hidden'}}><img src={toDirectImageUrl(b.url)} style={{maxWidth:'100%',maxHeight:120,objectFit:'contain',display:'block'}} onError={e=>{e.target.style.display='none'}}/></div>}
        </div>}

        {b.type==='youtube'&&<div style={{border:'1px dashed var(--bd)',borderRadius:8,padding:10,background:'var(--sf)'}}>
          <input value={b.url||''} onChange={e=>updateBlock(bi,'url',e.target.value)} placeholder="‡∏ß‡∏≤‡∏á YouTube URL" style={{width:'100%',padding:'8px 10px',background:'var(--sf2)',border:'1px solid var(--bd)',borderRadius:6,color:'var(--tx)',fontFamily:'var(--f)',fontSize:12,marginBottom:4}}/>
          <input value={b.caption||''} onChange={e=>updateBlock(bi,'caption',e.target.value)} placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)" style={{width:'100%',padding:'6px 10px',background:'var(--sf2)',border:'1px solid var(--bd)',borderRadius:6,color:'var(--tx)',fontFamily:'var(--f)',fontSize:11}}/>
        </div>}

        {/* Add block buttons after each block */}
        <div style={{display:'flex',gap:4,justifyContent:'center',marginTop:4}}>
          <button type="button" onClick={()=>addBlock('text',bi)} style={{fontSize:11,color:'var(--ac)',background:'none',border:'1px dashed var(--bd)',borderRadius:4,padding:'3px 10px',cursor:'pointer',fontFamily:'var(--f)'}}>+ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
          <button type="button" onClick={()=>addBlock('image',bi)} style={{fontSize:11,color:'var(--ac)',background:'none',border:'1px dashed var(--bd)',borderRadius:4,padding:'3px 10px',cursor:'pointer',fontFamily:'var(--f)'}}>+ ‡∏£‡∏π‡∏õ</button>
          <button type="button" onClick={()=>addBlock('youtube',bi)} style={{fontSize:11,color:'var(--ac)',background:'none',border:'1px dashed var(--bd)',borderRadius:4,padding:'3px 10px',cursor:'pointer',fontFamily:'var(--f)'}}>+ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</button>
        </div>
      </div>)}

      {blocks.length===0&&<div style={{display:'flex',gap:6,justifyContent:'center',padding:16}}>
        <button type="button" onClick={()=>setBlocks([{type:'text',value:''}])} className="btn bg bs">+ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
        <button type="button" onClick={()=>setBlocks([{type:'image',url:'',caption:''}])} className="btn bg bs">+ ‡∏£‡∏π‡∏õ</button>
        <button type="button" onClick={()=>setBlocks([{type:'youtube',url:'',caption:''}])} className="btn bg bs">+ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</button>
      </div>}
    </div>
    <div style={{fontSize:11,color:'var(--tx3)',lineHeight:1.7}}>üí° ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏£‡∏π‡∏õ ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏î‡πâ‡∏≠‡∏¥‡∏™‡∏£‡∏∞ ‡πÉ‡∏ä‡πâ ‚ñ≤‚ñº ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö<br/>üìå Google Drive ‡∏£‡∏π‡∏õ: ‡∏ï‡∏±‡πâ‡∏á "‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå" ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏≤‡∏á link ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</div>
  </div>;
}

function CLvls({lp,isUn,scores,onSel,courses}) {
  return <div>{courses.map(l=>{const p=lp(l);const u=isUn(l);const ps=p===100&&(scores[l.id]||0)>=70;return <div key={l.id} className={`lc ${!u?'lk':''}`} onClick={()=>u&&onSel(l)}><div className="li" style={{background:l.color+'15'}}>{l.icon}</div><div className="linf"><h3>Level {l.id}: {l.title}</h3><p>{l.subtitle} ¬∑ {l.lessons.length} ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p><div className="lpb"><div className="lpf" style={{width:p+'%',background:l.color}}/></div></div>{!u&&<span className="lbd" style={{background:'var(--sf3)',color:'var(--tx3)'}}>üîí</span>}{u&&ps&&<span className="lbd" style={{background:'var(--gnbg)',color:'var(--gn)'}}>‚úÖ ‡∏ú‡πà‡∏≤‡∏ô</span>}{u&&!ps&&<span className="lbd" style={{background:l.color+'20',color:l.color}}>{p>0?p+'%':'‡πÄ‡∏£‡∏¥‡πà‡∏° ‚Üí'}</span>}</div>})}</div>;
}

function LD({level,prog,qs,onBack,onLes,onQz}) {
  const ad=level.lessons.every(l=>prog[l.id]);
  return <div><button className="btn bg bs" onClick={onBack} style={{marginBottom:20}}>‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
  <div className="card" style={{marginBottom:20,display:'flex',alignItems:'center',gap:20}}><div style={{fontSize:48}}>{level.icon}</div><div><h2 style={{fontFamily:'Outfit',fontSize:22,fontWeight:700}}>Level {level.id}: {level.title}</h2><p style={{color:'var(--tx2)',fontSize:14}}>{level.subtitle} ¬∑ {level.lessons.length} ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</p>{qs!=null&&<span className={`badge ${qs>=70?'b-gn':'b-rd'}`} style={{marginTop:6}}>Quiz: {qs}% {qs>=70?'‚úÖ':'‚ùå'}</span>}</div></div>
  <h3 style={{fontSize:16,fontWeight:700,marginBottom:14}}>üìñ ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
  {level.lessons.map((l,i)=><div key={l.id} className={`lli ${prog[l.id]?'dn':''}`} onClick={()=>onLes(l)}><div className="lck">{prog[l.id]?'‚úì':i+1}</div><div style={{flex:1,fontSize:14,fontWeight:500}}>{l.title}</div>{prog[l.id]&&<span className="badge b-gn">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß</span>}</div>)}
  {ad&&<div style={{marginTop:20}}><button className="btn bp" onClick={onQz}>üìù ‡∏ó‡∏≥ Quiz ({level.quiz.length} ‡∏Ç‡πâ‡∏≠)</button>{qs!=null&&qs<70&&<p style={{color:'var(--rd)',fontSize:13,marginTop:8}}>‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ 70% ‡∏ó‡∏≥‡πÉ‡∏´‡∏°‡πà</p>}</div>}
  {!ad&&<p style={{color:'var(--tx3)',fontSize:13,marginTop:16}}>üìå ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥ Quiz</p>}</div>;
}

function LV({les,lvl,prog,onDn,onBack,onNx}) {
  const getYTid=(url)=>{if(!url)return null;const m=url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&?\s]+)/);return m?m[1]:null};

  // Support both old format (content+media) and new format (blocks)
  const blocks = les.blocks || [
    ...(les.media||[]).map(m=>({type:m.type,url:m.url,caption:m.caption})),
    ...(les.content?[{type:'text',value:les.content}]:[])
  ];

  return <div><button className="btn bg bs" onClick={onBack} style={{marginBottom:20}}>‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
  <div className="cv"><span className="badge b-pu" style={{marginBottom:8}}>{lvl.icon} Level {lvl.id}</span><h2>{les.title}</h2>

  {blocks.map((b,i)=><div key={i}>
    {b.type==='text'&&b.value&&<div className="cb">{b.value.split('\n').map((l,j)=>l.trim()===''?<br key={j}/>:<div key={j} style={{marginBottom:2}}>{l}</div>)}</div>}
    {b.type==='image'&&b.url&&<div className="media-block"><img src={toDirectImageUrl(b.url)} alt={b.caption||les.title}/>{b.caption&&<div className="caption">{b.caption}</div>}</div>}
    {b.type==='youtube'&&b.url&&<div className="media-block"><div className="vid-wrap"><iframe src={`https://www.youtube.com/embed/${getYTid(b.url)||''}`} allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture" allowFullScreen/></div>{b.caption&&<div className="caption">{b.caption}</div>}</div>}
  </div>)}

  <div className="cn">{!prog[les.id]&&<button className="btn bgn" onClick={onDn}>‚úì ‡∏à‡∏ö‡∏ö‡∏ó‡∏ô‡∏µ‡πâ</button>}<button className="btn bp" onClick={onNx}>‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button></div></div></div>;
}

function QV({level,onFin,onBack}) {
  const [idx,sI]=useState(0);const [ans,sA]=useState({});const [sel,sS]=useState(null);const [sub,sSub]=useState(false);const [fin,sF]=useState(false);
  const qz=level.quiz;const q=qz[idx];
  const submit=()=>{if(sel===null)return;sSub(true);sA(a=>({...a,[idx]:sel}))};
  const next=()=>{if(idx<qz.length-1){sI(idx+1);sS(null);sSub(false)}else sF(true)};

  if(fin){const c=qz.filter((q,i)=>ans[i]===q.ans).length;const sc=Math.round(c/qz.length*100);return <div className="qr card"><div style={{fontSize:60,marginBottom:12}}>{sc>=70?'üéâ':'üòî'}</div><div className={`scr ${sc>=70?'pass':'fail'}`}>{sc}%</div><p style={{color:'var(--tx2)',margin:'8px 0 20px'}}>‡∏ñ‡∏π‡∏Å {c}/{qz.length} {sc>=70?'‚Äî ‡∏ú‡πà‡∏≤‡∏ô!':'‚Äî ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ 70%'}</p><div style={{display:'flex',gap:10,justifyContent:'center'}}><button className="btn bg" onClick={onBack}>‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button><button className="btn bp" onClick={()=>onFin(sc)}>{sc>=70?'‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å':'‡∏õ‡∏¥‡∏î'}</button></div></div>}

  return <div><button className="btn bg bs" onClick={onBack} style={{marginBottom:20}}>‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
  <div className="qc card"><div className="qp">{qz.map((_,i)=><div key={i} className={`qd ${i<idx?'dn':i===idx?'cur':''}`}/>)}</div>
  <div className="qqn">‡∏Ç‡πâ‡∏≠ {idx+1}/{qz.length}</div><div className="qq">{q.q}</div>
  {q.opts.map((o,i)=>{let c="qo";if(sub&&i===q.ans)c+=" ok";else if(sub&&i===sel&&i!==q.ans)c+=" no";else if(!sub&&i===sel)c+=" sel";return <button key={i} className={c} onClick={()=>!sub&&sS(i)}>{o}</button>})}
  <div style={{display:'flex',gap:10,marginTop:16}}>{!sub&&<button className="btn bp" onClick={submit}>‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>}{sub&&<button className="btn bp" onClick={next}>{idx<qz.length-1?'‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí':'‡∏î‡∏π‡∏ú‡∏•'}</button>}</div></div></div>;
}

function Calc({isM}) {
  const [wCm,sW]=useState(200);
  const [hCm,sH]=useState(240);
  const [fabric,sFab]=useState('pattern');
  const [style,sSty]=useState('grommet');
  const [res,sRes]=useState(null);
  const [err,sErr]=useState('');

  // Price tables: [width, hMin, hMax, price]
  const TB_PATTERN = [
    [1.30,0.01,1.60,140.44],[1.30,1.80,1.80,151.67],[1.30,2.00,2.20,191.00],[1.30,2.40,2.60,202.23],
    [1.40,0.01,2.40,207.85],[1.40,2.60,2.60,219.08],
    [1.50,0.01,2.40,235.94],[1.50,2.60,2.60,247.17],
    [1.60,0.01,2.60,258.41],[1.70,0.01,2.60,269.64],[1.80,0.01,2.60,286.49],
    [2.00,0.01,2.40,308.96],[2.00,2.60,2.60,314.58],
    [2.20,0.01,2.60,320.20],[2.30,0.01,2.60,342.67],[2.40,0.01,2.60,353.90],
    [2.50,0.01,2.60,376.37],[2.60,0.01,2.60,393.23],
    [2.80,0.01,2.60,460.64],
    [3.00,0.01,2.40,471.87],[3.00,2.60,2.60,483.11],
  ];
  const TB_SOLID = [
    [1.30,0.01,1.60,151.67],[1.30,1.80,1.80,162.91],[1.30,2.00,2.20,207.85],[1.30,2.40,2.60,219.08],
    [1.40,0.01,2.40,219.08],[1.40,2.60,2.60,230.32],
    [1.50,0.01,2.40,247.17],[1.50,2.60,2.60,258.41],
    [1.60,0.01,2.60,269.64],[1.70,0.01,2.60,275.26],[1.80,0.01,2.60,297.73],
    [2.00,0.01,2.40,320.20],[2.00,2.60,2.60,331.43],
    [2.20,0.01,2.60,331.43],[2.30,0.01,2.60,353.90],[2.40,0.01,2.60,365.14],
    [2.50,0.01,2.60,393.23],[2.60,0.01,2.60,410.08],
    [2.80,0.01,2.60,471.87],
    [3.00,0.01,2.60,494.34],
  ];
  const TB_SHEER = [
    [1.30,0.01,1.60,129.20],[1.30,1.80,1.80,134.82],[1.30,2.00,2.20,168.53],[1.30,2.40,2.60,174.14],
    [1.40,0.01,2.40,168.53],[1.40,2.60,2.60,168.53],
    [1.50,0.01,2.40,179.76],[1.50,2.60,2.60,185.38],
    [1.60,0.01,2.40,196.61],[1.60,2.60,2.60,202.23],
    [2.00,0.01,2.40,235.94],[2.00,2.60,2.60,247.17],
    [2.50,0.01,2.60,280.88],
    [3.00,0.01,2.60,337.05],
  ];

  // Oversize tables (height > 2.60): [wMin, wMax, hMin, hMax, price]
  const OV_SOLID = [
    [2.70,2.80,2.63,3.20,614.34],[2.90,3.00,2.63,3.20,654.34],[3.10,3.20,2.63,3.20,694.34],
    [3.30,3.40,2.63,3.20,734.34],[3.50,3.60,2.63,3.20,774.34],[3.70,3.80,2.63,3.20,814.34],
    [3.90,4.00,2.63,3.20,854.34],[4.10,4.20,2.63,3.20,594.34],[4.30,4.40,2.63,3.20,934.34],
    [4.50,4.60,2.63,3.20,974.34],[4.70,4.80,2.63,3.20,1014.34],[4.90,5.00,2.63,3.20,1054.34],
    [5.10,5.20,2.63,3.20,1094.34],[5.30,5.40,2.63,3.20,1134.34],
  ];
  const OV_PATTERN_SHEER = [
    [2.70,2.80,2.63,3.20,580.64],[2.90,3.00,2.63,3.20,620.64],[3.10,3.20,2.63,3.20,660.64],
    [3.30,3.40,2.63,3.20,700.64],[3.50,3.60,2.63,3.20,740.64],[3.70,3.80,2.63,3.20,780.64],
    [3.90,4.00,2.63,3.20,820.64],[4.10,4.20,2.63,3.20,860.64],[4.30,4.40,2.63,3.20,900.64],
    [4.50,4.60,2.63,3.20,640.64],[4.70,4.80,2.63,3.20,980.64],[4.90,5.00,2.63,3.20,1020.64],
    [5.10,5.20,2.63,3.20,1060.64],[5.30,5.40,2.63,3.20,1100.64],
  ];

  const calc=()=>{
    sErr('');sRes(null);
    const w = wCm / 100; // convert cm to m
    const h = hCm / 100;
    if(w<1.30||h<0.01){sErr('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 130 ‡∏ã‡∏°.)');return}

    const tb = fabric==='pattern'?TB_PATTERN:fabric==='solid'?TB_SOLID:TB_SHEER;
    const ov = fabric==='solid'?OV_SOLID:OV_PATTERN_SHEER;

    // Check oversize first (h > 2.60)
    if(h > 2.62) {
      const row = ov.find(r => w >= r[0] && w <= r[1] && h >= r[2] && h <= r[3]);
      if(row){sRes({price:row[4],method:'oversize',baseW:row[0]+'-'+row[1],baseH:row[2]+'-'+row[3]});return}
      sErr('‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏Å‡∏¥‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤ Oversize ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô');return;
    }

    // Find base price from normal table
    // Step 1: find the matching width tier (round down to table width)
    const widths = [...new Set(tb.map(r=>r[0]))].sort((a,b)=>a-b);
    let baseW = null;
    for(let k=widths.length-1;k>=0;k--){if(w >= widths[k]){baseW=widths[k];break}}
    if(!baseW){sErr('‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏™‡∏∏‡∏î (130 ‡∏ã‡∏°.)');return}

    // Step 2: find height tier within that width
    const hRows = tb.filter(r=>r[0]===baseW).sort((a,b)=>a[1]-b[1]);
    let matched = null;
    for(const r of hRows){if(h >= r[1] && h <= r[2]){matched=r;break}}

    // If h > max height of this width, use the last height range
    if(!matched && hRows.length > 0){
      const lastR = hRows[hRows.length-1];
      if(h > lastR[2]){
        // height exceeds, calculate extra
        matched = lastR;
      }
    }
    if(!matched){sErr('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ô‡∏µ‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö');return}

    let basePrice = matched[3];
    let extraW = 0;
    let extraH = 0;
    let method = 'table';

    // Calculate extra for width beyond table width
    const wExtra = Math.round((w - baseW) * 100); // extra cm
    if(wExtra > 0){extraW = wExtra; basePrice += wExtra;}

    // Calculate extra for height beyond matched range max
    const hMax = matched[2];
    if(h > hMax){
      const hExtra = Math.round((h - hMax) * 100);
      extraH = hExtra; basePrice += hExtra;
    }

    sRes({price:Math.round(basePrice*100)/100, method, baseW, baseH:matched[1]+'-'+matched[2], basePrice:matched[3], extraW, extraH});
  };

  const fabrics=[{k:'pattern',l:'‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏•‡∏≤‡∏¢',ic:'üé®'},{k:'solid',l:'‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô',ic:'üé≠'},{k:'sheer',l:'‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô‡πÇ‡∏õ‡∏£‡πà‡∏á',ic:'üå§Ô∏è'}];
  const styles=[{k:'grommet',l:'‡∏ï‡∏≤‡πÑ‡∏Å‡πà'},{k:'hook',l:'‡∏ï‡∏∞‡∏Ç‡∏≠'},{k:'rod',l:'‡∏™‡∏≠‡∏î‡∏•‡∏ß‡∏î'}];

  return <div style={{maxWidth:600}}>
    <div className="card" style={{marginBottom:20}}>
      <h3 style={{fontSize:18,fontWeight:700,marginBottom:20}}>üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô</h3>

      <div className="mfg"><label>‡∏ä‡∏ô‡∏¥‡∏î‡∏ú‡πâ‡∏≤</label>
        <div style={{display:'flex',gap:8}}>{fabrics.map(f=><button key={f.k} type="button" onClick={()=>sFab(f.k)} style={{flex:1,padding:'12px 8px',borderRadius:8,border:fabric===f.k?'2px solid var(--ac)':'2px solid var(--bd)',background:fabric===f.k?'var(--acbg)':'var(--sf2)',cursor:'pointer',textAlign:'center',fontFamily:'var(--f)',fontSize:13,color:fabric===f.k?'var(--ac)':'var(--tx2)',fontWeight:fabric===f.k?700:500}}><div style={{fontSize:24,marginBottom:4}}>{f.ic}</div>{f.l}</button>)}</div>
      </div>

      <div className="mfg"><label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô</label>
        <div style={{display:'flex',gap:8}}>{styles.map(s=><button key={s.k} type="button" onClick={()=>sSty(s.k)} style={{flex:1,padding:'10px',borderRadius:8,border:style===s.k?'2px solid var(--ac)':'2px solid var(--bd)',background:style===s.k?'var(--acbg)':'var(--sf2)',cursor:'pointer',fontFamily:'var(--f)',fontSize:13,color:style===s.k?'var(--ac)':'var(--tx2)',fontWeight:style===s.k?700:500}}>ü™ü {s.l}</button>)}</div>
      </div>

      <div className="clr">
        <div className="clf"><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á (‡∏ã‡∏°.)</label><input type="number" value={wCm} onChange={e=>sW(+e.target.value)} min={130} step={1} placeholder="‡πÄ‡∏ä‡πà‡∏ô 200"/></div>
        <div className="clf"><label>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (‡∏ã‡∏°.)</label><input type="number" value={hCm} onChange={e=>sH(+e.target.value)} min={1} step={1} placeholder="‡πÄ‡∏ä‡πà‡∏ô 240"/></div>
      </div>

      <div style={{fontSize:12,color:'var(--tx3)',margin:'8px 0 12px',display:'flex',gap:16}}>
        <span>= ‡∏Å‡∏ß‡πâ‡∏≤‡∏á <b>{(wCm/100).toFixed(2)}</b> ‡∏°.</span>
        <span>= ‡∏™‡∏π‡∏á <b>{(hCm/100).toFixed(2)}</b> ‡∏°.</span>
      </div>

      <button className="btn bp" style={{width:'100%'}} onClick={calc}>üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</button>
    </div>

    {err&&<div className="card" style={{background:'var(--rdbg)',border:'1px solid var(--rd)',marginBottom:16}}>
      <div style={{color:'var(--rd)',fontSize:14,fontWeight:600}}>‚ö†Ô∏è {err}</div>
    </div>}

    {res&&<div className="card" style={{marginBottom:16}}>
      <div style={{textAlign:'center',marginBottom:16}}>
        <div style={{fontSize:13,color:'var(--tx2)',marginBottom:4}}>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</div>
        <div style={{fontFamily:'Outfit',fontSize:42,fontWeight:800,color:'var(--ac)'}}>{res.price.toFixed(2)}</div>
        <div style={{fontSize:14,color:'var(--tx2)'}}>‡∏ö‡∏≤‡∏ó</div>
      </div>

      <div style={{background:'var(--sf2)',borderRadius:8,padding:14,fontSize:13,lineHeight:2}}>
        <div><b>‡∏ä‡∏ô‡∏¥‡∏î‡∏ú‡πâ‡∏≤:</b> {fabrics.find(f=>f.k===fabric).l}</div>
        <div><b>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</b> {styles.find(s=>s.k===style).l}</div>
        <div><b>‡∏Ç‡∏ô‡∏≤‡∏î:</b> {(wCm/100).toFixed(2)} √ó {(hCm/100).toFixed(2)} ‡∏°. ({wCm} √ó {hCm} ‡∏ã‡∏°.)</div>
        {res.method==='table'&&<>
          <div style={{borderTop:'1px solid var(--bd)',marginTop:8,paddingTop:8}}><b>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ê‡∏≤‡∏ô:</b> {res.basePrice.toFixed(2)} ‡∏ö‡∏≤‡∏ó (‡∏Å‡∏ß‡πâ‡∏≤‡∏á {res.baseW} ‡∏°. / ‡∏™‡∏π‡∏á {res.baseH} ‡∏°.)</div>
          {res.extraW>0&&<div style={{color:'var(--or)'}}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á {res.extraW} ‡∏ã‡∏°. = +{res.extraW} ‡∏ö‡∏≤‡∏ó</div>}
          {res.extraH>0&&<div style={{color:'var(--or)'}}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏π‡∏á {res.extraH} ‡∏ã‡∏°. = +{res.extraH} ‡∏ö‡∏≤‡∏ó</div>}
        </>}
        {res.method==='oversize'&&<div style={{color:'var(--bl)',marginTop:8}}>üìê ‡∏Ç‡∏ô‡∏≤‡∏î Oversize: {res.baseW} √ó {res.baseH} ‡∏°.</div>}
      </div>

      <div style={{fontSize:11,color:'var(--tx3)',marginTop:12,textAlign:'center'}}>‚ö†Ô∏è ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ú‡πâ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏¢‡πá‡∏ö ‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á</div>
    </div>}
  </div>;
}

function Scr({scripts,setScripts,isAdmin}) {
  const [cp,sCp]=useState(null);
  const [editCat,sEC]=useState(null); // index of category being edited
  const [editItem,sEI]=useState(null); // {ci, ii} or {ci,'new'}
  const [toast,sToast]=useState(null);
  const showToast=(msg)=>{sToast(msg);setTimeout(()=>sToast(null),2500)};
  const catIcons=['üí¨','‚ùì','üéØ','üìû','üì£','ü§ù','üì±','üõí','üí°','üîî'];

  // Category CRUD
  const addCat=()=>{setScripts([...scripts,{cat:'‡∏´‡∏°‡∏ß‡∏î‡πÉ‡∏´‡∏°‡πà',items:[]}]);sEC(scripts.length)};
  const updateCat=(ci,val)=>{const n=[...scripts];n[ci]={...n[ci],cat:val};setScripts(n)};
  const removeCat=(ci)=>{if(confirm('‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î "'+scripts[ci].cat+'" ‡πÅ‡∏•‡∏∞ script ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')){setScripts(scripts.filter((_,i)=>i!==ci));sEC(null);showToast('üóëÔ∏è ‡∏•‡∏ö‡∏´‡∏°‡∏ß‡∏î‡πÅ‡∏•‡πâ‡∏ß')}};
  const moveCat=(ci,dir)=>{if(ci+dir<0||ci+dir>=scripts.length)return;const n=[...scripts];[n[ci],n[ci+dir]]=[n[ci+dir],n[ci]];setScripts(n)};

  // Item CRUD
  const addItem=(ci)=>{const n=[...scripts];n[ci]={...n[ci],items:[...n[ci].items,{title:'Script ‡πÉ‡∏´‡∏°‡πà',text:''}]};setScripts(n);sEI({ci,ii:n[ci].items.length-1})};
  const updateItem=(ci,ii,field,val)=>{const n=[...scripts];n[ci]={...n[ci],items:[...n[ci].items]};n[ci].items[ii]={...n[ci].items[ii],[field]:val};setScripts(n)};
  const removeItem=(ci,ii)=>{if(confirm('‡∏•‡∏ö script ‡∏ô‡∏µ‡πâ?')){const n=[...scripts];n[ci]={...n[ci],items:n[ci].items.filter((_,j)=>j!==ii)};setScripts(n);sEI(null);showToast('üóëÔ∏è ‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß')}};
  const moveItem=(ci,ii,dir)=>{if(ii+dir<0||ii+dir>=scripts[ci].items.length)return;const n=[...scripts];n[ci]={...n[ci],items:[...n[ci].items]};[n[ci].items[ii],n[ci].items[ii+dir]]=[n[ci].items[ii+dir],n[ci].items[ii]];setScripts(n)};

  return <div style={{maxWidth:800}}>
    {isAdmin&&<div style={{display:'flex',justifyContent:'flex-end',marginBottom:14}}>
      <button className="btn bp bs" onClick={addCat}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î</button>
    </div>}

    {scripts.map((c,ci)=><div key={ci} className="scat">
      <div style={{display:'flex',alignItems:'center',gap:8,marginBottom:12}}>
        <h3 style={{flex:1,margin:0}}>{catIcons[ci%catIcons.length]} {c.cat}</h3>
        {isAdmin&&<>
          <button type="button" onClick={()=>moveCat(ci,-1)} style={{background:'none',border:'none',color:'var(--tx3)',cursor:'pointer',fontSize:13}}>‚ñ≤</button>
          <button type="button" onClick={()=>moveCat(ci,1)} style={{background:'none',border:'none',color:'var(--tx3)',cursor:'pointer',fontSize:13}}>‚ñº</button>
          <button className="btn bg bs" style={{fontSize:12,padding:'4px 10px'}} onClick={()=>sEC(editCat===ci?null:ci)}>{editCat===ci?'‚úì ‡πÄ‡∏™‡∏£‡πá‡∏à':'‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç'}</button>
          <button type="button" onClick={()=>removeCat(ci)} style={{background:'none',border:'none',color:'var(--rd)',cursor:'pointer',fontSize:14}}>‚úï</button>
        </>}
      </div>

      {isAdmin&&editCat===ci&&<div style={{padding:12,background:'var(--sf2)',borderRadius:8,marginBottom:12,border:'1px solid var(--bd)'}}>
        <div className="mfg" style={{marginBottom:8}}><label>‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î</label><input value={c.cat} onChange={e=>updateCat(ci,e.target.value)}/></div>
      </div>}

      {c.items.map((it,ii)=>{const k=ci+'-'+ii;const isEditing=editItem&&editItem.ci===ci&&editItem.ii===ii;
        return <div key={k} className="si2" style={isEditing?{border:'1px solid var(--ac)',background:'var(--acbg)'}:{}}>
          {!isEditing&&<>
            <h4>{it.title}</h4>
            <p>{it.text}</p>
            <div style={{display:'flex',gap:6,marginTop:8}}>
              <button className="cpb" onClick={()=>{navigator.clipboard?.writeText(it.text);sCp(k);setTimeout(()=>sCp(null),2000)}}>{cp===k?'‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß':'üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å'}</button>
              {isAdmin&&editCat===ci&&<>
                <button className="cpb" onClick={()=>sEI({ci,ii})}>‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                <button className="cpb" style={{color:'var(--rd)'}} onClick={()=>moveItem(ci,ii,-1)}>‚ñ≤</button>
                <button className="cpb" style={{color:'var(--rd)'}} onClick={()=>moveItem(ci,ii,1)}>‚ñº</button>
                <button className="cpb" style={{color:'var(--rd)'}} onClick={()=>removeItem(ci,ii)}>‚úï ‡∏•‡∏ö</button>
              </>}
            </div>
          </>}
          {isEditing&&<div>
            <div className="mfg" style={{marginBottom:8}}><label>‡∏ä‡∏∑‡πà‡∏≠ Script</label><input value={it.title} onChange={e=>updateItem(ci,ii,'title',e.target.value)}/></div>
            <div className="mfg" style={{marginBottom:8}}><label>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ Script</label><textarea value={it.text} onChange={e=>updateItem(ci,ii,'text',e.target.value)} style={{minHeight:100,lineHeight:1.7}} placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå script ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£..."/></div>
            <button className="btn bp bs" onClick={()=>sEI(null)}>‚úì ‡πÄ‡∏™‡∏£‡πá‡∏à</button>
          </div>}
        </div>})}

      {isAdmin&&editCat===ci&&<button onClick={()=>addItem(ci)} style={{width:'100%',padding:10,border:'1px dashed var(--bd)',borderRadius:8,background:'transparent',color:'var(--ac)',cursor:'pointer',fontSize:13,fontFamily:'var(--f)',marginTop:6}}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏° Script ‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ</button>}
    </div>)}

    {scripts.length===0&&<div className="card" style={{textAlign:'center',padding:40,color:'var(--tx3)'}}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Script {isAdmin&&'‚Äî ‡∏Å‡∏î + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏ß‡∏î'}</div>}
    {toast&&<div className="toast">{toast}</div>}
  </div>;
}

function Res({resources,setResources,isAdmin}) {
  const [modal,sM]=useState(null);
  const [toast,sToast]=useState(null);
  const showToast=(msg)=>{sToast(msg);setTimeout(()=>sToast(null),2500)};
  const icons=['üìÇ','üì∏','üìã','üìê','üé®','üìä','üè∑Ô∏è','üìù','üìÅ','üé¨','üîó','üì¶','üíº','üìå'];
  const types=['PDF','XLSX','DOCX','ZIP','PNG','JPG','MP4','LINK','‡∏≠‡∏∑‡πà‡∏ô‡πÜ'];

  const saveRes=(form)=>{
    if(modal.mode==='add'){
      const newId=Math.max(...resources.map(r=>r.id),0)+1;
      setResources([...resources,{id:newId,...form}]);
      showToast('‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
    } else {
      setResources(resources.map(r=>r.id===modal.data.id?{...r,...form}:r));
      showToast('‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
    }
    sM(null);
  };
  const delRes=(id)=>{if(confirm('‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ?')){setResources(resources.filter(r=>r.id!==id));sM(null);showToast('üóëÔ∏è ‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß')}};

  return <div style={{maxWidth:800}}>
    <div className="card">
      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:18}}>
        <h3 style={{fontSize:16,fontWeight:700}}>üìÅ Resource Center ({resources.length} ‡πÑ‡∏ü‡∏•‡πå)</h3>
        {isAdmin&&<button className="btn bp bs" onClick={()=>sM({mode:'add'})}>+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå</button>}
      </div>

      {!isAdmin&&<div style={{padding:12,background:'var(--acbg)',borderRadius:8,marginBottom:16,fontSize:13,color:'var(--ac2)'}}>
        üí° ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Admin
      </div>}

      {resources.length===0&&<div style={{textAlign:'center',padding:40,color:'var(--tx3)'}}>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå</div>}

      {resources.map((it,i)=><div key={it.id} style={{display:'flex',alignItems:'center',gap:14,padding:'14px 0',borderBottom:i<resources.length-1?'1px solid var(--bd)':'none'}}>
        <span style={{fontSize:28}}>{it.icon}</span>
        <div style={{flex:1}}>
          <div style={{fontWeight:600,fontSize:14}}>{it.name}</div>
          <div style={{fontSize:12,color:'var(--tx3)'}}>{it.type}{it.desc?' ¬∑ '+it.desc:''}</div>
          {!it.url&&<div style={{fontSize:11,color:'var(--or)',marginTop:2}}>‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå</div>}
        </div>
        <div style={{display:'flex',gap:6}}>
          {it.url&&<button className="btn bp bs" onClick={()=>window.open(it.url,'_blank')}>‚¨á ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</button>}
          {!it.url&&<button className="btn bg bs" disabled style={{opacity:.4}}>‚¨á ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå</button>}
          {isAdmin&&<button className="btn bg bs" onClick={()=>sM({mode:'edit',data:it})}>‚úèÔ∏è</button>}
        </div>
      </div>)}
    </div>

    {modal&&<ResModal data={modal.mode==='edit'?modal.data:null} icons={icons} types={types} onSave={saveRes} onDelete={modal.mode==='edit'?()=>delRes(modal.data.id):null} onClose={()=>sM(null)}/>}
    {toast&&<div className="toast">{toast}</div>}
  </div>;
}

function ResModal({data,icons,types,onSave,onDelete,onClose}) {
  const [name,sN]=useState(data?.name||'');
  const [icon,sI]=useState(data?.icon||'üìÇ');
  const [type,sT]=useState(data?.type||'PDF');
  const [url,sU]=useState(data?.url||'');
  const [desc,sD]=useState(data?.desc||'');

  return <div className="modal-overlay" onClick={onClose}><div className="modal" onClick={e=>e.stopPropagation()}>
    <h2>{data?'‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå':'‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà'}</h2>

    <div className="mfg"><label>‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå</label><input value={name} onChange={e=>sN(e.target.value)} placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô 2026"/></div>

    <div className="mfg"><label>‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô</label><div style={{display:'flex',gap:6,flexWrap:'wrap'}}>{icons.map(ic=><button key={ic} type="button" onClick={()=>sI(ic)} style={{fontSize:20,padding:'5px 8px',borderRadius:6,border:icon===ic?'2px solid var(--ac)':'2px solid var(--bd)',background:icon===ic?'var(--acbg)':'var(--sf2)',cursor:'pointer'}}>{ic}</button>)}</div></div>

    <div className="mfr">
      <div className="mfg"><label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏ü‡∏•‡πå</label><select value={type} onChange={e=>sT(e.target.value)}>{types.map(t=><option key={t} value={t}>{t}</option>)}</select></div>
      <div className="mfg"><label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label><input value={desc} onChange={e=>sD(e.target.value)} placeholder="‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î"/></div>
    </div>

    <div className="mfg">
      <label>üîó ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏ü‡∏•‡πå (Google Drive / Dropbox / URL)</label>
      <input value={url} onChange={e=>sU(e.target.value)} placeholder="https://drive.google.com/file/d/... ‡∏´‡∏£‡∏∑‡∏≠ URL ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"/>
      <div style={{fontSize:11,color:'var(--tx3)',marginTop:6,lineHeight:1.6}}>
        üí° <b>‡∏ß‡∏¥‡∏ò‡∏µ‡πÑ‡∏î‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå:</b><br/>
        ‚Ä¢ <b>Google Drive:</b> ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå ‚Üí ‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå ‚Üí ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå<br/>
        ‚Ä¢ <b>Dropbox:</b> ‡∏Ñ‡∏•‡∏¥‡∏Å Share ‚Üí Copy link<br/>
        ‚Ä¢ <b>‡∏≠‡∏∑‡πà‡∏ô‡πÜ:</b> ‡∏ß‡∏≤‡∏á URL ‡∏ï‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ
      </div>
    </div>

    {url&&<div style={{padding:10,background:'var(--gnbg)',borderRadius:8,fontSize:13,color:'var(--gn)',marginBottom:8}}>‚úÖ ‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß ‚Äî ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡∏Å‡∏î‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ</div>}

    <div className="modal-actions">
      {onDelete&&<button className="btn btn-danger bs" type="button" onClick={onDelete}>üóëÔ∏è ‡∏•‡∏ö</button>}
      <div style={{flex:1}}/>
      <button className="btn bg bs" type="button" onClick={onClose}>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button className="btn bp bs" type="button" onClick={()=>{if(!name.trim())return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå');onSave({name,icon,type,url,desc})}}>üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>
  </div></div>;
}

function rbg(r){return{trainee:'rgba(253,203,110,.15)',sales:'rgba(0,184,148,.15)',manager:'rgba(108,92,231,.15)',admin:'rgba(225,112,85,.15)'}[r]}
function rcl(r){return{trainee:'#FDCB6E',sales:'#00B894',manager:'#A29BFE',admin:'#E17055'}[r]}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>